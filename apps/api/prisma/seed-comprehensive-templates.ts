import { Prisma, PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

// ============================================================
// COMPREHENSIVE QUESTIONNAIRE TEMPLATES
// Based on professional insurance broker questionnaire
// ============================================================

// Sector translations
const sectorTranslations: Record<string, string> = {
  CONSTRUCTION: 'בנייה',
  TECHNOLOGY: 'טכנולוגיה',
  GENERIC: 'כללי',
  MANUFACTURING: 'ייצור',
  RETAIL: 'קמעונאות',
  HEALTHCARE: 'בריאות',
  LOGISTICS: 'לוגיסטיקה',
  CONSULTING: 'ייעוץ',
};

// ============================================================
// SHARED SECTIONS (Used across multiple sectors)
// ============================================================

const companyInfoSection = {
  title: 'Company Information',
  titleHe: 'פרטי החברה',
  descriptionHe: 'מידע בסיסי על החברה והמבנה הארגוני',
  order: 0,
  questions: [
    {
      questionId: 'legalStructure',
      type: 'select',
      label: 'Legal structure',
      labelHe: 'מבנה משפטי',
      descriptionHe: 'סוג הישות המשפטית של החברה',
      required: true,
      options: [
        { value: 'ltd', label: 'Limited Company (Ltd)', labelHe: 'חברה בע"מ' },
        { value: 'partnership', label: 'Partnership', labelHe: 'שותפות' },
        { value: 'sole_proprietor', label: 'Sole Proprietor', labelHe: 'עוסק מורשה' },
        { value: 'public', label: 'Public Company', labelHe: 'חברה ציבורית' },
        { value: 'nonprofit', label: 'Non-Profit', labelHe: 'עמותה / מלכ"ר' },
      ],
      order: 0,
    },
    {
      questionId: 'companyAge',
      type: 'number',
      label: 'Years in business',
      labelHe: 'שנות פעילות',
      descriptionHe: 'מספר שנים שהחברה פעילה',
      required: true,
      min: 0,
      max: 150,
      riskWeight: 0.1,
      order: 1,
    },
    {
      questionId: 'employeeCount',
      type: 'number',
      label: 'Total employees',
      labelHe: 'סה"כ עובדים',
      descriptionHe: 'מספר עובדים כולל (כולל קבלנים וזמניים)',
      required: true,
      min: 0,
      riskWeight: 0.15,
      policyAffinity: ['EMPLOYER_LIABILITY'],
      order: 2,
    },
    {
      questionId: 'permanentEmployees',
      type: 'number',
      label: 'Permanent employees',
      labelHe: 'עובדים קבועים',
      descriptionHe: 'מספר עובדים קבועים',
      required: false,
      min: 0,
      order: 3,
    },
    {
      questionId: 'contractEmployees',
      type: 'number',
      label: 'Contract/Temp employees',
      labelHe: 'עובדי קבלן / זמניים',
      descriptionHe: 'מספר עובדי קבלן או עובדים זמניים',
      required: false,
      min: 0,
      order: 4,
    },
    {
      questionId: 'annualRevenue',
      type: 'currency',
      label: 'Annual revenue',
      labelHe: 'מחזור שנתי',
      descriptionHe: 'מחזור הכנסות שנתי בש"ח',
      required: true,
      min: 0,
      riskWeight: 0.2,
      order: 5,
    },
    {
      questionId: 'hasSubsidiaries',
      type: 'boolean',
      label: 'Has subsidiaries or related companies',
      labelHe: 'יש חברות בנות או קשורות',
      descriptionHe: 'האם לחברה יש חברות בנות או חברות קשורות?',
      required: true,
      order: 6,
    },
    {
      questionId: 'subsidiaryDetails',
      type: 'text',
      label: 'Subsidiary details',
      labelHe: 'פרטי חברות בנות',
      descriptionHe: 'תאר את החברות הבנות/קשורות ואחוזי הבעלות',
      required: false,
      showIf: [{ questionId: 'hasSubsidiaries', operator: 'equals', value: true }],
      order: 7,
    },
  ],
};

const assetsPropertySection = {
  title: 'Assets & Property',
  titleHe: 'נכסים ורכוש',
  descriptionHe: 'מידע על נכסים פיזיים, ציוד ומלאי',
  order: 1,
  questions: [
    {
      questionId: 'propertyOwnership',
      type: 'select',
      label: 'Property ownership status',
      labelHe: 'סטטוס בעלות על הנכס',
      descriptionHe: 'האם הנכס בבעלות או בשכירות',
      required: true,
      options: [
        { value: 'owned', label: 'Owned', labelHe: 'בבעלות' },
        { value: 'rented', label: 'Rented/Leased', labelHe: 'שכור' },
        { value: 'mixed', label: 'Mixed', labelHe: 'משולב' },
        { value: 'no_property', label: 'No physical property', labelHe: 'ללא נכס פיזי' },
      ],
      order: 0,
    },
    {
      questionId: 'buildingValue',
      type: 'currency',
      label: 'Building value',
      labelHe: 'שווי מבנה',
      descriptionHe: 'שווי המבנה לצורכי ביטוח (אם בבעלות)',
      required: false,
      min: 0,
      showIf: [{ questionId: 'propertyOwnership', operator: 'in', value: ['owned', 'mixed'] }],
      policyAffinity: ['PROPERTY'],
      order: 1,
    },
    {
      questionId: 'improvementsValue',
      type: 'currency',
      label: 'Improvements & fixtures value',
      labelHe: 'שווי שיפורים ואביזרים',
      descriptionHe: 'שווי שיפורי דיירים, התקנות וציוד קבוע',
      required: false,
      min: 0,
      showIf: [{ questionId: 'propertyOwnership', operator: 'notEquals', value: 'no_property' }],
      policyAffinity: ['PROPERTY'],
      order: 2,
    },
    {
      questionId: 'equipmentValue',
      type: 'currency',
      label: 'Equipment & machinery value',
      labelHe: 'שווי ציוד ומכונות',
      descriptionHe: 'שווי כל הציוד, מכונות וכלי עבודה',
      required: true,
      min: 0,
      policyAffinity: ['PROPERTY', 'EQUIPMENT_BREAKDOWN'],
      order: 3,
    },
    {
      questionId: 'inventoryValue',
      type: 'currency',
      label: 'Inventory value',
      labelHe: 'שווי מלאי',
      descriptionHe: 'שווי ממוצע של מלאי (חומרי גלם, מוצרים מוגמרים)',
      required: false,
      min: 0,
      policyAffinity: ['PROPERTY'],
      order: 4,
    },
    {
      questionId: 'electronicEquipmentValue',
      type: 'currency',
      label: 'Electronic equipment value',
      labelHe: 'שווי ציוד אלקטרוני',
      descriptionHe: 'מחשבים, שרתים, ציוד תקשורת ואלקטרוניקה',
      required: false,
      min: 0,
      policyAffinity: ['ELECTRONIC_EQUIPMENT'],
      order: 5,
    },
    {
      questionId: 'hasVehicles',
      type: 'boolean',
      label: 'Company owns/operates vehicles',
      labelHe: 'לחברה רכבים',
      descriptionHe: 'האם לחברה יש רכבים בבעלות או בליסינג',
      required: true,
      order: 6,
    },
    {
      questionId: 'vehicleCount',
      type: 'number',
      label: 'Number of vehicles',
      labelHe: 'מספר רכבים',
      descriptionHe: 'מספר רכבים כולל',
      required: true,
      min: 0,
      showIf: [{ questionId: 'hasVehicles', operator: 'equals', value: true }],
      policyAffinity: ['MOTOR'],
      order: 7,
    },
    {
      questionId: 'vehicleTypes',
      type: 'multiselect',
      label: 'Vehicle types',
      labelHe: 'סוגי רכבים',
      descriptionHe: 'סוגי הרכבים בצי החברה',
      required: true,
      showIf: [{ questionId: 'hasVehicles', operator: 'equals', value: true }],
      options: [
        { value: 'passenger', label: 'Passenger cars', labelHe: 'רכבי נוסעים' },
        { value: 'commercial', label: 'Commercial vehicles', labelHe: 'רכבים מסחריים' },
        { value: 'trucks', label: 'Trucks', labelHe: 'משאיות' },
        { value: 'motorcycles', label: 'Motorcycles', labelHe: 'אופנועים' },
        { value: 'heavy_equipment', label: 'Heavy equipment', labelHe: 'כלים כבדים' },
      ],
      policyAffinity: ['MOTOR'],
      order: 8,
    },
  ],
};

const operationsSection = {
  title: 'Operations & Activities',
  titleHe: 'פעילות ותפעול',
  descriptionHe: 'מידע על אופי הפעילות העסקית',
  order: 2,
  questions: [
    {
      questionId: 'locationCount',
      type: 'number',
      label: 'Number of locations',
      labelHe: 'מספר סניפים/מיקומים',
      descriptionHe: 'מספר מיקומים פיזיים של העסק',
      required: true,
      min: 0,
      order: 0,
    },
    {
      questionId: 'operatingHours',
      type: 'select',
      label: 'Operating hours',
      labelHe: 'שעות פעילות',
      descriptionHe: 'שעות הפעילות העיקריות',
      required: true,
      options: [
        { value: 'regular', label: 'Regular business hours', labelHe: 'שעות עבודה רגילות' },
        { value: 'extended', label: 'Extended hours', labelHe: 'שעות מורחבות' },
        { value: '24_7', label: '24/7 Operation', labelHe: 'פעילות 24/7' },
        { value: 'shifts', label: 'Shift work', labelHe: 'עבודה במשמרות' },
      ],
      order: 1,
    },
    {
      questionId: 'hasPublicAccess',
      type: 'boolean',
      label: 'Public access to premises',
      labelHe: 'כניסת קהל למקום',
      descriptionHe: 'האם לקוחות או קהל מגיעים פיזית למקום העסק',
      required: true,
      riskWeight: 0.1,
      policyAffinity: ['GENERAL_LIABILITY'],
      order: 2,
    },
    {
      questionId: 'dailyVisitors',
      type: 'number',
      label: 'Average daily visitors',
      labelHe: 'מבקרים יומיים ממוצע',
      descriptionHe: 'מספר מבקרים/לקוחות ממוצע ביום',
      required: true,
      min: 0,
      showIf: [{ questionId: 'hasPublicAccess', operator: 'equals', value: true }],
      riskWeight: 0.1,
      policyAffinity: ['GENERAL_LIABILITY'],
      order: 3,
    },
    {
      questionId: 'usesSubcontractors',
      type: 'boolean',
      label: 'Uses subcontractors',
      labelHe: 'שימוש בקבלני משנה',
      descriptionHe: 'האם החברה משתמשת בקבלני משנה',
      required: true,
      order: 4,
    },
    {
      questionId: 'subcontractorInsuranceRequired',
      type: 'boolean',
      label: 'Require subcontractor insurance',
      labelHe: 'דרישת ביטוח מקבלני משנה',
      descriptionHe: 'האם נדרש ביטוח מקבלני משנה',
      required: true,
      showIf: [{ questionId: 'usesSubcontractors', operator: 'equals', value: true }],
      order: 5,
    },
    {
      questionId: 'hasInternationalOps',
      type: 'boolean',
      label: 'International operations',
      labelHe: 'פעילות בינלאומית',
      descriptionHe: 'האם לחברה יש פעילות מחוץ לישראל',
      required: true,
      order: 6,
    },
    {
      questionId: 'internationalCountries',
      type: 'multiselect',
      label: 'Countries of operation',
      labelHe: 'מדינות פעילות',
      descriptionHe: 'באילו אזורים/מדינות יש פעילות',
      required: true,
      showIf: [{ questionId: 'hasInternationalOps', operator: 'equals', value: true }],
      options: [
        { value: 'europe', label: 'Europe', labelHe: 'אירופה' },
        { value: 'usa', label: 'United States', labelHe: 'ארה"ב' },
        { value: 'asia', label: 'Asia', labelHe: 'אסיה' },
        { value: 'latam', label: 'Latin America', labelHe: 'דרום אמריקה' },
        { value: 'other', label: 'Other', labelHe: 'אחר' },
      ],
      riskWeight: 0.2,
      policyAffinity: ['GENERAL_LIABILITY', 'PROFESSIONAL_INDEMNITY'],
      order: 7,
    },
    // Tier 2 trigger questions for product-specific sections
    {
      questionId: 'handlesCash',
      type: 'boolean',
      label: 'Handles significant cash amounts',
      labelHe: 'מטפל בכמויות משמעותיות של מזומן',
      descriptionHe: 'האם העסק מטפל בכמויות משמעותיות של מזומן',
      required: true,
      policyAffinity: ['CASH_MONEY'],
      order: 8,
    },
    {
      questionId: 'transportsGoods',
      type: 'boolean',
      label: 'Regularly transports goods',
      labelHe: 'מוביל סחורות באופן קבוע',
      descriptionHe: 'האם העסק מוביל סחורות באופן קבוע',
      required: true,
      policyAffinity: ['CARGO_TRANSIT'],
      order: 9,
    },
    {
      questionId: 'manufacturesProducts',
      type: 'boolean',
      label: 'Manufactures or distributes products',
      labelHe: 'מייצר או מפיץ מוצרים',
      descriptionHe: 'האם העסק מייצר, מייבא או מפיץ מוצרים',
      required: true,
      policyAffinity: ['PRODUCT_LIABILITY'],
      order: 10,
    },
    {
      questionId: 'usesHeavyEquipment',
      type: 'boolean',
      label: 'Uses heavy engineering equipment',
      labelHe: 'משתמש בציוד מכני הנדסי כבד',
      descriptionHe: 'האם העסק משתמש בציוד מכני הנדסי כבד',
      required: true,
      policyAffinity: ['HEAVY_EQUIPMENT'],
      order: 11,
    },
    {
      questionId: 'performsConstructionWork',
      type: 'boolean',
      label: 'Performs construction or contracting work',
      labelHe: 'מבצע עבודות בנייה או קבלנות',
      descriptionHe: 'האם העסק מבצע עבודות בנייה או קבלנות',
      required: true,
      policyAffinity: ['CAR_INSURANCE'],
      order: 12,
    },
    {
      questionId: 'employeesAccessFinancials',
      type: 'boolean',
      label: 'Employees have access to financial assets',
      labelHe: 'לעובדים גישה לנכסים פיננסיים',
      descriptionHe: 'האם לעובדים יש גישה לנכסים פיננסיים של החברה',
      required: true,
      policyAffinity: ['FIDELITY_CRIME'],
      order: 13,
    },
  ],
};

const riskExposuresSection = {
  title: 'Risk Exposures',
  titleHe: 'חשיפות סיכון',
  descriptionHe: 'זיהוי סיכונים ספציפיים בפעילות',
  order: 3,
  questions: [
    {
      questionId: 'hazardousMaterials',
      type: 'boolean',
      label: 'Works with hazardous materials',
      labelHe: 'עבודה עם חומרים מסוכנים',
      descriptionHe: 'האם העסק משתמש או מאחסן חומרים מסוכנים',
      required: true,
      riskWeight: 0.2,
      policyAffinity: ['GENERAL_LIABILITY', 'ENVIRONMENTAL_LIABILITY'],
      order: 0,
    },
    {
      questionId: 'hazardousMaterialTypes',
      type: 'multiselect',
      label: 'Types of hazardous materials',
      labelHe: 'סוגי חומרים מסוכנים',
      descriptionHe: 'סוגי החומרים המסוכנים בשימוש',
      required: true,
      showIf: [{ questionId: 'hazardousMaterials', operator: 'equals', value: true }],
      options: [
        { value: 'flammable', label: 'Flammable materials', labelHe: 'חומרים דליקים' },
        { value: 'toxic', label: 'Toxic substances', labelHe: 'חומרים רעילים' },
        { value: 'corrosive', label: 'Corrosive materials', labelHe: 'חומרים מאכלים' },
        { value: 'explosive', label: 'Explosives', labelHe: 'חומרי נפץ' },
        { value: 'radioactive', label: 'Radioactive materials', labelHe: 'חומרים רדיואקטיביים' },
      ],
      riskWeight: 0.25,
      order: 1,
    },
    {
      questionId: 'heightWork',
      type: 'boolean',
      label: 'Work at height',
      labelHe: 'עבודה בגובה',
      descriptionHe: 'האם מתבצעת עבודה בגובה (מעל 2 מטר)',
      required: true,
      riskWeight: 0.15,
      policyAffinity: ['EMPLOYER_LIABILITY'],
      order: 2,
    },
    {
      questionId: 'confinedSpaces',
      type: 'boolean',
      label: 'Work in confined spaces',
      labelHe: 'עבודה במקומות מוקפים',
      descriptionHe: 'האם מתבצעת עבודה במקומות מוקפים (מיכלים, תאי ביוב וכד\')',
      required: true,
      riskWeight: 0.15,
      policyAffinity: ['EMPLOYER_LIABILITY'],
      order: 3,
    },
    {
      questionId: 'heavyMachinery',
      type: 'boolean',
      label: 'Uses heavy machinery',
      labelHe: 'שימוש במכונות כבדות',
      descriptionHe: 'האם משתמשים במכונות כבדות או ציוד תעשייתי',
      required: true,
      riskWeight: 0.1,
      policyAffinity: ['EMPLOYER_LIABILITY', 'EQUIPMENT_BREAKDOWN'],
      order: 4,
    },
    {
      questionId: 'foodHandling',
      type: 'boolean',
      label: 'Food handling/production',
      labelHe: 'טיפול/ייצור מזון',
      descriptionHe: 'האם העסק מטפל, מייצר או מוכר מזון',
      required: true,
      riskWeight: 0.15,
      policyAffinity: ['PRODUCT_LIABILITY', 'GENERAL_LIABILITY'],
      order: 5,
    },
    {
      questionId: 'medicalServices',
      type: 'boolean',
      label: 'Medical/healthcare services',
      labelHe: 'שירותים רפואיים',
      descriptionHe: 'האם מספקים שירותים רפואיים או קשורים לבריאות',
      required: true,
      riskWeight: 0.2,
      policyAffinity: ['PROFESSIONAL_INDEMNITY', 'MEDICAL_MALPRACTICE'],
      order: 6,
    },
    {
      questionId: 'childrenServices',
      type: 'boolean',
      label: 'Services involving children',
      labelHe: 'שירותים לילדים',
      descriptionHe: 'האם העסק מספק שירותים לילדים או מארח ילדים',
      required: true,
      riskWeight: 0.15,
      policyAffinity: ['GENERAL_LIABILITY'],
      order: 7,
    },
  ],
};

const insuranceHistorySection = {
  title: 'Insurance History',
  titleHe: 'היסטוריית ביטוח',
  descriptionHe: 'מידע על ביטוחים קיימים ותביעות קודמות',
  order: 4,
  questions: [
    {
      questionId: 'hasCurrentInsurance',
      type: 'boolean',
      label: 'Currently has business insurance',
      labelHe: 'יש ביטוח עסקי כיום',
      descriptionHe: 'האם לעסק יש כיום ביטוח עסקי',
      required: true,
      order: 0,
    },
    {
      questionId: 'currentInsurer',
      type: 'text',
      label: 'Current insurer name',
      labelHe: 'שם חברת הביטוח הנוכחית',
      descriptionHe: 'שם חברת הביטוח הנוכחית',
      required: false,
      showIf: [{ questionId: 'hasCurrentInsurance', operator: 'equals', value: true }],
      order: 1,
    },
    {
      questionId: 'policyRenewalDate',
      type: 'date',
      label: 'Policy renewal date',
      labelHe: 'תאריך חידוש פוליסה',
      descriptionHe: 'מועד חידוש הפוליסה הנוכחית',
      required: false,
      showIf: [{ questionId: 'hasCurrentInsurance', operator: 'equals', value: true }],
      order: 2,
    },
    {
      questionId: 'previousClaims',
      type: 'boolean',
      label: 'Claims in last 5 years',
      labelHe: 'תביעות ב-5 שנים אחרונות',
      descriptionHe: 'האם היו תביעות ביטוח ב-5 השנים האחרונות',
      required: true,
      riskWeight: 0.2,
      order: 3,
    },
    {
      questionId: 'claimCount',
      type: 'number',
      label: 'Number of claims',
      labelHe: 'מספר תביעות',
      descriptionHe: 'כמה תביעות הוגשו',
      required: true,
      min: 0,
      showIf: [{ questionId: 'previousClaims', operator: 'equals', value: true }],
      riskWeight: 0.15,
      order: 4,
    },
    {
      questionId: 'totalClaimAmount',
      type: 'currency',
      label: 'Total claims amount',
      labelHe: 'סכום תביעות כולל',
      descriptionHe: 'סכום כולל של כל התביעות',
      required: false,
      min: 0,
      showIf: [{ questionId: 'previousClaims', operator: 'equals', value: true }],
      riskWeight: 0.1,
      order: 5,
    },
    {
      questionId: 'insuranceCancelled',
      type: 'boolean',
      label: 'Insurance ever cancelled/declined',
      labelHe: 'ביטוח בוטל/נדחה בעבר',
      descriptionHe: 'האם אי פעם בוטל ביטוח או נדחתה בקשה לביטוח',
      required: true,
      riskWeight: 0.25,
      order: 6,
    },
  ],
};

const insuranceNeedsSection = {
  title: 'Insurance Needs',
  titleHe: 'צרכי ביטוח',
  descriptionHe: 'סוגי הכיסויים הביטוחיים הנדרשים',
  order: 5,
  questions: [
    {
      questionId: 'requestedCoverages',
      type: 'multiselect',
      label: 'Requested insurance coverages',
      labelHe: 'כיסויים ביטוחיים מבוקשים',
      descriptionHe: 'סמן את סוגי הביטוח הנדרשים',
      required: true,
      options: [
        { value: 'property', label: 'Property/Fire Insurance', labelHe: 'ביטוח רכוש/אש' },
        { value: 'business_interruption', label: 'Business Interruption', labelHe: 'אובדן רווחים' },
        { value: 'general_liability', label: 'General Liability', labelHe: 'צד ג\' - אחריות כללית' },
        { value: 'employer_liability', label: 'Employer Liability', labelHe: 'חבות מעבידים' },
        { value: 'professional_indemnity', label: 'Professional Indemnity', labelHe: 'אחריות מקצועית' },
        { value: 'product_liability', label: 'Product Liability', labelHe: 'אחריות מוצר' },
        { value: 'cyber', label: 'Cyber Liability', labelHe: 'ביטוח סייבר' },
        { value: 'dno', label: 'Directors & Officers', labelHe: 'ביטוח נושאי משרה (D&O)' },
        { value: 'motor', label: 'Motor Fleet', labelHe: 'ביטוח צי רכב' },
        { value: 'cargo', label: 'Cargo/Transit', labelHe: 'ביטוח מטען' },
        { value: 'equipment', label: 'Equipment Breakdown', labelHe: 'שבר מכונות' },
        { value: 'fidelity', label: 'Fidelity/Crime', labelHe: 'ביטוח נאמנות עובדים' },
      ],
      order: 0,
    },
    {
      questionId: 'propertyLimit',
      type: 'currency',
      label: 'Desired property coverage limit',
      labelHe: 'סכום ביטוח רכוש מבוקש',
      descriptionHe: 'גבול אחריות מבוקש לביטוח רכוש',
      required: false,
      min: 0,
      showIf: [{ questionId: 'requestedCoverages', operator: 'contains', value: 'property' }],
      policyAffinity: ['PROPERTY'],
      order: 1,
    },
    {
      questionId: 'liabilityLimit',
      type: 'currency',
      label: 'Desired liability coverage limit',
      labelHe: 'סכום ביטוח אחריות מבוקש',
      descriptionHe: 'גבול אחריות מבוקש לביטוח צד ג\'',
      required: false,
      min: 0,
      showIf: [{ questionId: 'requestedCoverages', operator: 'contains', value: 'general_liability' }],
      policyAffinity: ['GENERAL_LIABILITY'],
      order: 2,
    },
    {
      questionId: 'specialRequirements',
      type: 'text',
      label: 'Special requirements or comments',
      labelHe: 'דרישות מיוחדות או הערות',
      descriptionHe: 'פרט דרישות מיוחדות או הערות נוספות',
      required: false,
      order: 3,
    },
  ],
};

// ============================================================
// CONSTRUCTION SECTOR - SPECIFIC SECTIONS
// ============================================================

const constructionProjectsSection = {
  title: 'Construction Projects',
  titleHe: 'פרויקטים ועבודות בנייה',
  descriptionHe: 'מידע על סוגי פרויקטים ועבודות',
  order: 2,
  questions: [
    {
      questionId: 'projectTypes',
      type: 'multiselect',
      label: 'Types of construction work',
      labelHe: 'סוגי עבודות בנייה',
      descriptionHe: 'סמן את כל סוגי העבודות שהחברה מבצעת',
      required: true,
      options: [
        { value: 'residential', label: 'Residential', labelHe: 'מגורים' },
        { value: 'commercial', label: 'Commercial', labelHe: 'מסחרי' },
        { value: 'industrial', label: 'Industrial', labelHe: 'תעשייתי' },
        { value: 'infrastructure', label: 'Infrastructure', labelHe: 'תשתיות' },
        { value: 'renovation', label: 'Renovation', labelHe: 'שיפוצים' },
        { value: 'demolition', label: 'Demolition', labelHe: 'הריסות' },
      ],
      riskWeight: 0.2,
      policyAffinity: ['CAR_INSURANCE', 'GENERAL_LIABILITY'],
      order: 0,
    },
    {
      questionId: 'maxProjectValue',
      type: 'currency',
      label: 'Maximum single project value',
      labelHe: 'שווי פרויקט מקסימלי',
      descriptionHe: 'שווי מקסימלי של פרויקט בודד',
      required: true,
      min: 0,
      riskWeight: 0.25,
      policyAffinity: ['CAR_INSURANCE'],
      order: 1,
    },
    {
      questionId: 'avgProjectValue',
      type: 'currency',
      label: 'Average project value',
      labelHe: 'שווי פרויקט ממוצע',
      descriptionHe: 'שווי ממוצע של פרויקט',
      required: true,
      min: 0,
      order: 2,
    },
    {
      questionId: 'activeProjectsCount',
      type: 'number',
      label: 'Current active projects',
      labelHe: 'פרויקטים פעילים כיום',
      descriptionHe: 'מספר פרויקטים פעילים כרגע',
      required: true,
      min: 0,
      order: 3,
    },
    {
      questionId: 'undergroundWork',
      type: 'boolean',
      label: 'Underground/excavation work',
      labelHe: 'עבודות תת-קרקעיות / חפירות',
      descriptionHe: 'האם מבצעים עבודות תת-קרקעיות, חפירה או דיפון',
      required: true,
      riskWeight: 0.2,
      policyAffinity: ['CAR_INSURANCE', 'GENERAL_LIABILITY'],
      order: 4,
    },
    {
      questionId: 'craneWork',
      type: 'boolean',
      label: 'Uses cranes/heavy lifting',
      labelHe: 'שימוש במנופים/הרמה כבדה',
      descriptionHe: 'האם משתמשים במנופים או ציוד הרמה כבד',
      required: true,
      riskWeight: 0.15,
      policyAffinity: ['EMPLOYER_LIABILITY', 'GENERAL_LIABILITY'],
      order: 5,
    },
    {
      questionId: 'worksNearExistingBuildings',
      type: 'boolean',
      label: 'Works near existing buildings',
      labelHe: 'עבודה ליד מבנים קיימים',
      descriptionHe: 'האם מתבצעות עבודות בסמוך למבנים קיימים',
      required: true,
      riskWeight: 0.1,
      policyAffinity: ['GENERAL_LIABILITY'],
      order: 6,
    },
    {
      questionId: 'hotWork',
      type: 'boolean',
      label: 'Hot work (welding, cutting)',
      labelHe: 'עבודות חמות (ריתוך, חיתוך)',
      descriptionHe: 'האם מבצעים עבודות ריתוך, חיתוך או עבודות אש',
      required: true,
      riskWeight: 0.15,
      policyAffinity: ['PROPERTY', 'GENERAL_LIABILITY'],
      order: 7,
    },
  ],
};

// ============================================================
// TECHNOLOGY SECTOR - SPECIFIC SECTIONS
// ============================================================

const technologyServicesSection = {
  title: 'Services & Products',
  titleHe: 'שירותים ומוצרים',
  descriptionHe: 'מידע על סוגי השירותים והמוצרים הטכנולוגיים',
  order: 2,
  questions: [
    {
      questionId: 'serviceTypes',
      type: 'multiselect',
      label: 'Types of services/products',
      labelHe: 'סוגי שירותים/מוצרים',
      descriptionHe: 'סמן את כל סוגי השירותים שהחברה מספקת',
      required: true,
      options: [
        { value: 'software_dev', label: 'Custom Software Development', labelHe: 'פיתוח תוכנה מותאם' },
        { value: 'saas', label: 'SaaS/Cloud Products', labelHe: 'מוצרי ענן (SaaS)' },
        { value: 'it_consulting', label: 'IT Consulting', labelHe: 'ייעוץ טכנולוגי' },
        { value: 'managed_services', label: 'Managed IT Services', labelHe: 'שירותי IT מנוהלים' },
        { value: 'cybersecurity', label: 'Cybersecurity Services', labelHe: 'שירותי אבטחת מידע' },
        { value: 'data_analytics', label: 'Data Analytics/BI', labelHe: 'אנליטיקה ובינה עסקית' },
        { value: 'ai_ml', label: 'AI/Machine Learning', labelHe: 'בינה מלאכותית' },
        { value: 'hardware', label: 'Hardware/Devices', labelHe: 'חומרה/מכשירים' },
      ],
      riskWeight: 0.2,
      policyAffinity: ['PROFESSIONAL_INDEMNITY', 'CYBER_LIABILITY'],
      order: 0,
    },
    {
      questionId: 'maxContractValue',
      type: 'currency',
      label: 'Maximum contract value',
      labelHe: 'שווי חוזה מקסימלי',
      descriptionHe: 'שווי מקסימלי של חוזה/פרויקט בודד',
      required: true,
      min: 0,
      riskWeight: 0.2,
      policyAffinity: ['PROFESSIONAL_INDEMNITY'],
      order: 1,
    },
    {
      questionId: 'providesSupport',
      type: 'boolean',
      label: 'Provides technical support/SLA',
      labelHe: 'מספקים תמיכה טכנית / SLA',
      descriptionHe: 'האם מספקים שירותי תמיכה טכנית או התחייבויות SLA',
      required: true,
      policyAffinity: ['PROFESSIONAL_INDEMNITY'],
      order: 2,
    },
    {
      questionId: 'slaPenalties',
      type: 'boolean',
      label: 'SLA includes financial penalties',
      labelHe: 'SLA כולל קנסות כספיים',
      descriptionHe: 'האם הסכמי SLA כוללים קנסות כספיים',
      required: true,
      showIf: [{ questionId: 'providesSupport', operator: 'equals', value: true }],
      riskWeight: 0.1,
      order: 3,
    },
  ],
};

const dataSecuritySection = {
  title: 'Data & Security',
  titleHe: 'נתונים ואבטחה',
  descriptionHe: 'מידע על טיפול בנתונים ואבטחת מידע',
  order: 3,
  questions: [
    {
      questionId: 'handlesPersonalData',
      type: 'boolean',
      label: 'Handles personal data (PII)',
      labelHe: 'מטפל במידע אישי',
      descriptionHe: 'האם החברה מעבדת או מאחסנת מידע אישי מזהה',
      required: true,
      riskWeight: 0.25,
      policyAffinity: ['CYBER_LIABILITY'],
      order: 0,
    },
    {
      questionId: 'dataTypes',
      type: 'multiselect',
      label: 'Types of data handled',
      labelHe: 'סוגי מידע מעובד',
      descriptionHe: 'סוגי המידע הרגיש שהחברה מטפלת בהם',
      required: true,
      showIf: [{ questionId: 'handlesPersonalData', operator: 'equals', value: true }],
      options: [
        { value: 'pii', label: 'Personal Identifiable Info', labelHe: 'מידע אישי מזהה' },
        { value: 'financial', label: 'Financial/Payment Data', labelHe: 'מידע פיננסי/תשלומים' },
        { value: 'health', label: 'Health/Medical Data', labelHe: 'מידע רפואי' },
        { value: 'children', label: 'Children\'s Data', labelHe: 'מידע על ילדים' },
        { value: 'biometric', label: 'Biometric Data', labelHe: 'מידע ביומטרי' },
      ],
      riskWeight: 0.2,
      policyAffinity: ['CYBER_LIABILITY'],
      order: 1,
    },
    {
      questionId: 'dataRecordsCount',
      type: 'select',
      label: 'Approximate records count',
      labelHe: 'כמות רשומות משוערת',
      descriptionHe: 'מספר רשומות מידע אישי משוער',
      required: true,
      showIf: [{ questionId: 'handlesPersonalData', operator: 'equals', value: true }],
      options: [
        { value: 'under_10k', label: 'Under 10,000', labelHe: 'עד 10,000' },
        { value: '10k_100k', label: '10,000 - 100,000', labelHe: '10,000 - 100,000' },
        { value: '100k_1m', label: '100,000 - 1 million', labelHe: '100,000 - מיליון' },
        { value: 'over_1m', label: 'Over 1 million', labelHe: 'מעל מיליון' },
      ],
      riskWeight: 0.2,
      policyAffinity: ['CYBER_LIABILITY'],
      order: 2,
    },
    {
      questionId: 'hasSecurityCertification',
      type: 'boolean',
      label: 'Has security certifications',
      labelHe: 'יש הסמכות אבטחה',
      descriptionHe: 'האם יש הסמכות אבטחת מידע (ISO 27001, SOC2)',
      required: true,
      riskWeight: -0.1,
      order: 3,
    },
    {
      questionId: 'securityCertifications',
      type: 'multiselect',
      label: 'Security certifications held',
      labelHe: 'הסמכות אבטחה קיימות',
      descriptionHe: 'סמן את ההסמכות הקיימות',
      required: true,
      showIf: [{ questionId: 'hasSecurityCertification', operator: 'equals', value: true }],
      options: [
        { value: 'iso27001', label: 'ISO 27001', labelHe: 'ISO 27001' },
        { value: 'soc2', label: 'SOC 2', labelHe: 'SOC 2' },
        { value: 'pci', label: 'PCI DSS', labelHe: 'PCI DSS' },
        { value: 'hipaa', label: 'HIPAA', labelHe: 'HIPAA' },
        { value: 'gdpr', label: 'GDPR Compliant', labelHe: 'עמידה ב-GDPR' },
      ],
      riskWeight: -0.05,
      order: 4,
    },
    {
      questionId: 'hasDataBackup',
      type: 'boolean',
      label: 'Has data backup procedures',
      labelHe: 'יש נהלי גיבוי נתונים',
      descriptionHe: 'האם יש מערך גיבוי נתונים סדור',
      required: true,
      riskWeight: -0.05,
      order: 5,
    },
    {
      questionId: 'hasIncidentResponse',
      type: 'boolean',
      label: 'Has incident response plan',
      labelHe: 'יש תוכנית תגובה לאירועים',
      descriptionHe: 'האם יש תוכנית תגובה לאירועי אבטחה',
      required: true,
      riskWeight: -0.05,
      order: 6,
    },
  ],
};

// ============================================================
// MANUFACTURING SECTOR - SPECIFIC SECTIONS
// ============================================================

const manufacturingOperationsSection = {
  title: 'Manufacturing Operations',
  titleHe: 'פעילות ייצורית',
  descriptionHe: 'מידע על תהליכי הייצור והמוצרים',
  order: 2,
  questions: [
    {
      questionId: 'productTypes',
      type: 'multiselect',
      label: 'Types of products manufactured',
      labelHe: 'סוגי מוצרים מיוצרים',
      descriptionHe: 'סוגי המוצרים העיקריים שהחברה מייצרת',
      required: true,
      options: [
        { value: 'food', label: 'Food & Beverages', labelHe: 'מזון ומשקאות' },
        { value: 'chemical', label: 'Chemicals/Pharmaceuticals', labelHe: 'כימיקלים/תרופות' },
        { value: 'electronics', label: 'Electronics', labelHe: 'אלקטרוניקה' },
        { value: 'machinery', label: 'Machinery/Equipment', labelHe: 'מכונות/ציוד' },
        { value: 'textiles', label: 'Textiles/Apparel', labelHe: 'טקסטיל/הלבשה' },
        { value: 'metals', label: 'Metals/Fabrication', labelHe: 'מתכות/עיבוד' },
        { value: 'plastics', label: 'Plastics/Rubber', labelHe: 'פלסטיק/גומי' },
        { value: 'other', label: 'Other', labelHe: 'אחר' },
      ],
      riskWeight: 0.15,
      policyAffinity: ['PRODUCT_LIABILITY'],
      order: 0,
    },
    {
      questionId: 'annualProductionValue',
      type: 'currency',
      label: 'Annual production value',
      labelHe: 'שווי ייצור שנתי',
      descriptionHe: 'שווי כולל של הייצור השנתי',
      required: true,
      min: 0,
      policyAffinity: ['PRODUCT_LIABILITY'],
      order: 1,
    },
    {
      questionId: 'exportPercentage',
      type: 'number',
      label: 'Export percentage',
      labelHe: 'אחוז יצוא',
      descriptionHe: 'אחוז המוצרים המיוצאים לחו"ל',
      required: true,
      min: 0,
      max: 100,
      riskWeight: 0.1,
      policyAffinity: ['PRODUCT_LIABILITY'],
      order: 2,
    },
    {
      questionId: 'exportsToUS',
      type: 'boolean',
      label: 'Exports to USA',
      labelHe: 'יצוא לארה"ב',
      descriptionHe: 'האם מוצרים מיוצאים לארה"ב',
      required: true,
      showIf: [{ questionId: 'exportPercentage', operator: 'greaterThan', value: 0 }],
      riskWeight: 0.25,
      policyAffinity: ['PRODUCT_LIABILITY'],
      order: 3,
    },
    {
      questionId: 'hasQualityCertification',
      type: 'boolean',
      label: 'Has quality certifications',
      labelHe: 'יש תעודות איכות',
      descriptionHe: 'האם יש תקני איכות (ISO 9001, CE וכד\')',
      required: true,
      riskWeight: -0.1,
      order: 4,
    },
    {
      questionId: 'productRecalls',
      type: 'boolean',
      label: 'Product recalls in past 5 years',
      labelHe: 'החזרת מוצרים ב-5 שנים אחרונות',
      descriptionHe: 'האם היו החזרות מוצרים ב-5 השנים האחרונות',
      required: true,
      riskWeight: 0.2,
      policyAffinity: ['PRODUCT_LIABILITY'],
      order: 5,
    },
  ],
};

// ============================================================
// RETAIL SECTOR - SPECIFIC SECTIONS
// ============================================================

const retailOperationsSection = {
  title: 'Retail Operations',
  titleHe: 'פעילות קמעונאית',
  descriptionHe: 'מידע על החנויות ופעילות המכירות',
  order: 2,
  questions: [
    {
      questionId: 'storeCount',
      type: 'number',
      label: 'Number of stores',
      labelHe: 'מספר חנויות',
      descriptionHe: 'מספר חנויות פיזיות',
      required: true,
      min: 0,
      order: 0,
    },
    {
      questionId: 'hasOnlineStore',
      type: 'boolean',
      label: 'Has online store',
      labelHe: 'יש חנות מקוונת',
      descriptionHe: 'האם יש פעילות מכירות מקוונת',
      required: true,
      policyAffinity: ['CYBER_LIABILITY'],
      order: 1,
    },
    {
      questionId: 'onlineSalesPercentage',
      type: 'number',
      label: 'Online sales percentage',
      labelHe: 'אחוז מכירות מקוונות',
      descriptionHe: 'אחוז המכירות דרך האינטרנט',
      required: true,
      min: 0,
      max: 100,
      showIf: [{ questionId: 'hasOnlineStore', operator: 'equals', value: true }],
      policyAffinity: ['CYBER_LIABILITY'],
      order: 2,
    },
    {
      questionId: 'productCategories',
      type: 'multiselect',
      label: 'Product categories sold',
      labelHe: 'קטגוריות מוצרים נמכרים',
      descriptionHe: 'סוגי המוצרים הנמכרים',
      required: true,
      options: [
        { value: 'food', label: 'Food & Groceries', labelHe: 'מזון ומצרכים' },
        { value: 'electronics', label: 'Electronics', labelHe: 'אלקטרוניקה' },
        { value: 'clothing', label: 'Clothing & Fashion', labelHe: 'ביגוד ואופנה' },
        { value: 'furniture', label: 'Furniture & Home', labelHe: 'רהיטים ולבית' },
        { value: 'cosmetics', label: 'Cosmetics & Personal Care', labelHe: 'קוסמטיקה וטיפוח' },
        { value: 'jewelry', label: 'Jewelry & Watches', labelHe: 'תכשיטים ושעונים' },
        { value: 'sports', label: 'Sports & Outdoor', labelHe: 'ספורט ופנאי' },
        { value: 'other', label: 'Other', labelHe: 'אחר' },
      ],
      order: 3,
    },
    {
      questionId: 'sellsHighValueItems',
      type: 'boolean',
      label: 'Sells high-value items',
      labelHe: 'מוכר פריטים יקרי ערך',
      descriptionHe: 'האם נמכרים פריטים יקרי ערך (תכשיטים, אלקטרוניקה יקרה)',
      required: true,
      riskWeight: 0.1,
      policyAffinity: ['PROPERTY', 'FIDELITY'],
      order: 4,
    },
    {
      questionId: 'cashOnPremises',
      type: 'currency',
      label: 'Max cash on premises',
      labelHe: 'מזומן מקסימלי במקום',
      descriptionHe: 'סכום מזומן מקסימלי הנמצא בחנות',
      required: true,
      min: 0,
      policyAffinity: ['PROPERTY', 'FIDELITY'],
      order: 5,
    },
    {
      questionId: 'hasSecurity',
      type: 'boolean',
      label: 'Has security measures',
      labelHe: 'יש אמצעי אבטחה',
      descriptionHe: 'האם יש מערכת אזעקה, מצלמות או שומר',
      required: true,
      riskWeight: -0.1,
      order: 6,
    },
  ],
};

// ============================================================
// HEALTHCARE SECTOR - SPECIFIC SECTIONS
// ============================================================

const healthcareServicesSection = {
  title: 'Healthcare Services',
  titleHe: 'שירותי בריאות',
  descriptionHe: 'מידע על סוגי השירותים הרפואיים',
  order: 2,
  questions: [
    {
      questionId: 'facilityType',
      type: 'select',
      label: 'Type of facility',
      labelHe: 'סוג המתקן',
      descriptionHe: 'סוג המוסד הרפואי',
      required: true,
      options: [
        { value: 'hospital', label: 'Hospital', labelHe: 'בית חולים' },
        { value: 'clinic', label: 'Clinic/Outpatient', labelHe: 'מרפאה/אמבולטורי' },
        { value: 'dental', label: 'Dental Practice', labelHe: 'מרפאת שיניים' },
        { value: 'nursing_home', label: 'Nursing Home', labelHe: 'בית אבות' },
        { value: 'rehab', label: 'Rehabilitation Center', labelHe: 'מרכז שיקום' },
        { value: 'lab', label: 'Laboratory', labelHe: 'מעבדה' },
        { value: 'pharmacy', label: 'Pharmacy', labelHe: 'בית מרקחת' },
        { value: 'other', label: 'Other', labelHe: 'אחר' },
      ],
      riskWeight: 0.15,
      policyAffinity: ['MEDICAL_MALPRACTICE'],
      order: 0,
    },
    {
      questionId: 'medicalStaffCount',
      type: 'number',
      label: 'Number of medical staff',
      labelHe: 'מספר צוות רפואי',
      descriptionHe: 'מספר רופאים, אחיות וצוות רפואי',
      required: true,
      min: 0,
      riskWeight: 0.1,
      policyAffinity: ['MEDICAL_MALPRACTICE'],
      order: 1,
    },
    {
      questionId: 'serviceTypes',
      type: 'multiselect',
      label: 'Types of services provided',
      labelHe: 'סוגי שירותים ניתנים',
      descriptionHe: 'סוגי השירותים הרפואיים הניתנים',
      required: true,
      options: [
        { value: 'surgery', label: 'Surgery', labelHe: 'ניתוחים' },
        { value: 'emergency', label: 'Emergency Care', labelHe: 'טיפול חירום' },
        { value: 'obstetrics', label: 'Obstetrics/Maternity', labelHe: 'יילוד/מיילדות' },
        { value: 'pediatrics', label: 'Pediatrics', labelHe: 'ילדים' },
        { value: 'diagnostics', label: 'Diagnostics/Imaging', labelHe: 'אבחון/הדמיה' },
        { value: 'therapy', label: 'Physical Therapy', labelHe: 'פיזיותרפיה' },
        { value: 'mental_health', label: 'Mental Health', labelHe: 'בריאות הנפש' },
        { value: 'cosmetic', label: 'Cosmetic Procedures', labelHe: 'פרוצדורות אסתטיות' },
      ],
      riskWeight: 0.2,
      policyAffinity: ['MEDICAL_MALPRACTICE'],
      order: 2,
    },
    {
      questionId: 'annualPatients',
      type: 'number',
      label: 'Annual patient visits',
      labelHe: 'ביקורי מטופלים שנתיים',
      descriptionHe: 'מספר ביקורי מטופלים בשנה',
      required: true,
      min: 0,
      riskWeight: 0.1,
      policyAffinity: ['MEDICAL_MALPRACTICE'],
      order: 3,
    },
    {
      questionId: 'hasOvernightPatients',
      type: 'boolean',
      label: 'Has overnight patients',
      labelHe: 'מטופלים בלינת לילה',
      descriptionHe: 'האם יש מטופלים שנשארים ללילה',
      required: true,
      riskWeight: 0.15,
      policyAffinity: ['MEDICAL_MALPRACTICE', 'GENERAL_LIABILITY'],
      order: 4,
    },
    {
      questionId: 'medicalMalpracticeClaims',
      type: 'boolean',
      label: 'Malpractice claims in past 5 years',
      labelHe: 'תביעות רשלנות רפואית ב-5 שנים',
      descriptionHe: 'האם היו תביעות רשלנות רפואית ב-5 השנים האחרונות',
      required: true,
      riskWeight: 0.25,
      order: 5,
    },
  ],
};

// ============================================================
// LOGISTICS SECTOR - SPECIFIC SECTIONS
// ============================================================

const logisticsOperationsSection = {
  title: 'Logistics Operations',
  titleHe: 'פעילות לוגיסטית',
  descriptionHe: 'מידע על פעילות ההובלה והאחסון',
  order: 2,
  questions: [
    {
      questionId: 'serviceTypes',
      type: 'multiselect',
      label: 'Types of logistics services',
      labelHe: 'סוגי שירותי לוגיסטיקה',
      descriptionHe: 'סוגי השירותים הלוגיסטיים',
      required: true,
      options: [
        { value: 'trucking', label: 'Trucking/Road Freight', labelHe: 'הובלה יבשתית' },
        { value: 'warehousing', label: 'Warehousing', labelHe: 'מחסנאות' },
        { value: 'courier', label: 'Courier/Express', labelHe: 'שליחויות/משלוחים' },
        { value: 'freight_forwarding', label: 'Freight Forwarding', labelHe: 'שילוח בינלאומי' },
        { value: 'cold_chain', label: 'Cold Chain/Refrigerated', labelHe: 'שרשרת קור' },
        { value: 'hazmat', label: 'Hazardous Materials', labelHe: 'חומרים מסוכנים' },
        { value: 'moving', label: 'Moving/Relocation', labelHe: 'הובלות/מעברי דירה' },
      ],
      riskWeight: 0.15,
      policyAffinity: ['CARGO', 'MOTOR'],
      order: 0,
    },
    {
      questionId: 'fleetSize',
      type: 'number',
      label: 'Fleet size (vehicles)',
      labelHe: 'גודל צי הרכבים',
      descriptionHe: 'מספר רכבים בצי',
      required: true,
      min: 0,
      riskWeight: 0.1,
      policyAffinity: ['MOTOR'],
      order: 1,
    },
    {
      questionId: 'maxCargoValue',
      type: 'currency',
      label: 'Maximum single cargo value',
      labelHe: 'שווי מטען מקסימלי',
      descriptionHe: 'שווי מקסימלי של מטען בודד',
      required: true,
      min: 0,
      riskWeight: 0.15,
      policyAffinity: ['CARGO'],
      order: 2,
    },
    {
      questionId: 'warehouseArea',
      type: 'number',
      label: 'Warehouse area (sqm)',
      labelHe: 'שטח מחסנים (מ"ר)',
      descriptionHe: 'שטח מחסנים כולל במטרים רבועים',
      required: false,
      min: 0,
      policyAffinity: ['PROPERTY'],
      order: 3,
    },
    {
      questionId: 'goodsStoredValue',
      type: 'currency',
      label: 'Value of goods stored',
      labelHe: 'שווי סחורות מאוחסנות',
      descriptionHe: 'שווי ממוצע של סחורות במחסנים',
      required: false,
      min: 0,
      policyAffinity: ['PROPERTY', 'BAILEE_LIABILITY'],
      order: 4,
    },
    {
      questionId: 'crossBorderOperations',
      type: 'boolean',
      label: 'Cross-border operations',
      labelHe: 'פעילות חוצת גבולות',
      descriptionHe: 'האם יש הובלות בינלאומיות',
      required: true,
      riskWeight: 0.1,
      policyAffinity: ['CARGO'],
      order: 5,
    },
    {
      questionId: 'handlesHighValueGoods',
      type: 'boolean',
      label: 'Handles high-value goods',
      labelHe: 'מטפל בסחורות יקרות',
      descriptionHe: 'האם מטפלים בסחורות יקרות ערך',
      required: true,
      riskWeight: 0.15,
      policyAffinity: ['CARGO', 'FIDELITY'],
      order: 6,
    },
  ],
};

// ============================================================
// CONSULTING SECTOR - SPECIFIC SECTIONS
// ============================================================

const consultingServicesSection = {
  title: 'Consulting Services',
  titleHe: 'שירותי ייעוץ',
  descriptionHe: 'מידע על סוגי שירותי הייעוץ',
  order: 2,
  questions: [
    {
      questionId: 'consultingTypes',
      type: 'multiselect',
      label: 'Types of consulting services',
      labelHe: 'סוגי שירותי ייעוץ',
      descriptionHe: 'תחומי הייעוץ העיקריים',
      required: true,
      options: [
        { value: 'management', label: 'Management Consulting', labelHe: 'ייעוץ ניהולי' },
        { value: 'financial', label: 'Financial Advisory', labelHe: 'ייעוץ פיננסי' },
        { value: 'legal', label: 'Legal Services', labelHe: 'שירותים משפטיים' },
        { value: 'accounting', label: 'Accounting/Audit', labelHe: 'ראיית חשבון/ביקורת' },
        { value: 'hr', label: 'HR Consulting', labelHe: 'ייעוץ משאבי אנוש' },
        { value: 'marketing', label: 'Marketing/PR', labelHe: 'שיווק/יחסי ציבור' },
        { value: 'engineering', label: 'Engineering Services', labelHe: 'שירותי הנדסה' },
        { value: 'architecture', label: 'Architecture/Design', labelHe: 'אדריכלות/עיצוב' },
        { value: 'real_estate', label: 'Real Estate Advisory', labelHe: 'ייעוץ נדל"ן' },
      ],
      riskWeight: 0.15,
      policyAffinity: ['PROFESSIONAL_INDEMNITY'],
      order: 0,
    },
    {
      questionId: 'maxEngagementValue',
      type: 'currency',
      label: 'Maximum engagement value',
      labelHe: 'שווי התקשרות מקסימלי',
      descriptionHe: 'שווי מקסימלי של פרויקט ייעוץ בודד',
      required: true,
      min: 0,
      riskWeight: 0.2,
      policyAffinity: ['PROFESSIONAL_INDEMNITY'],
      order: 1,
    },
    {
      questionId: 'providesWrittenAdvice',
      type: 'boolean',
      label: 'Provides written opinions/advice',
      labelHe: 'מספק חוות דעת בכתב',
      descriptionHe: 'האם מספקים ייעוץ או חוות דעת בכתב',
      required: true,
      riskWeight: 0.1,
      policyAffinity: ['PROFESSIONAL_INDEMNITY'],
      order: 2,
    },
    {
      questionId: 'signsContracts',
      type: 'boolean',
      label: 'Signs contracts on behalf of clients',
      labelHe: 'חותם על חוזים בשם לקוחות',
      descriptionHe: 'האם חותמים על חוזים או מסמכים בשם לקוחות',
      required: true,
      riskWeight: 0.15,
      policyAffinity: ['PROFESSIONAL_INDEMNITY'],
      order: 3,
    },
    {
      questionId: 'handlesClientFunds',
      type: 'boolean',
      label: 'Handles client funds',
      labelHe: 'מטפל בכספי לקוחות',
      descriptionHe: 'האם מטפלים בכספים של לקוחות',
      required: true,
      riskWeight: 0.2,
      policyAffinity: ['PROFESSIONAL_INDEMNITY', 'FIDELITY'],
      order: 4,
    },
    {
      questionId: 'professionalLicenses',
      type: 'boolean',
      label: 'Staff hold professional licenses',
      labelHe: 'לצוות יש רישיונות מקצועיים',
      descriptionHe: 'האם לצוות יש רישיונות מקצועיים (עו"ד, רו"ח וכד\')',
      required: true,
      riskWeight: -0.05,
      order: 5,
    },
  ],
};

// ============================================================
// PRODUCT-SPECIFIC SECTIONS (113 Questions)
// ============================================================

// Section 1: Fire & Consequential Loss (8q)
const fireConsequentialLossSection: SectionData = {
  title: 'Fire & Consequential Loss',
  titleHe: 'אש ואובדן רווחים',
  descriptionHe: 'שאלות ספציפיות לביטוח אש ואובדן רווחים',
  order: 10,
  showIf: [{ questionId: 'propertyOwnership', operator: 'notEquals', value: 'no_property' }],
  questions: [
    {
      questionId: 'fire_totalPropertyValue',
      type: 'currency',
      label: 'Total property value',
      labelHe: 'שווי רכוש כולל',
      descriptionHe: 'שווי רכוש כולל לצורכי ביטוח אש',
      required: true,
      min: 0,
      policyAffinity: ['FIRE_CONSEQUENTIAL_LOSS'],
      order: 0,
    },
    {
      questionId: 'fire_annualGrossProfit',
      type: 'currency',
      label: 'Annual gross profit and payroll cost',
      labelHe: 'רווח גולמי שנתי ועלות שכר',
      descriptionHe: 'רווח גולמי שנתי כולל עלות שכר לחישוב אובדן רווחים',
      required: true,
      min: 0,
      policyAffinity: ['FIRE_CONSEQUENTIAL_LOSS'],
      order: 1,
    },
    {
      questionId: 'fire_maxReinstatementPeriod',
      type: 'select',
      label: 'Maximum reinstatement period',
      labelHe: 'תקופת השבה מקסימלית',
      descriptionHe: 'תקופת השבה מקסימלית נדרשת',
      required: true,
      options: [
        { value: '3', label: '3 months', labelHe: '3 חודשים' },
        { value: '6', label: '6 months', labelHe: '6 חודשים' },
        { value: '12', label: '12 months', labelHe: '12 חודשים' },
        { value: '18', label: '18 months', labelHe: '18 חודשים' },
        { value: '24', label: '24 months', labelHe: '24 חודשים' },
      ],
      policyAffinity: ['FIRE_CONSEQUENTIAL_LOSS'],
      order: 2,
    },
    {
      questionId: 'fire_needsEarthquake',
      type: 'boolean',
      label: 'Needs earthquake coverage',
      labelHe: 'נדרש כיסוי רעידת אדמה?',
      descriptionHe: 'האם נדרש כיסוי לנזקי רעידת אדמה',
      required: true,
      policyAffinity: ['FIRE_CONSEQUENTIAL_LOSS'],
      order: 3,
    },
    {
      questionId: 'fire_propertyOutsidePremises',
      type: 'boolean',
      label: 'Property outside main premises',
      labelHe: 'רכוש מחוץ לחצרים העיקריים?',
      descriptionHe: 'האם יש רכוש מבוטח מחוץ לחצרים העיקריים',
      required: true,
      policyAffinity: ['FIRE_CONSEQUENTIAL_LOSS'],
      order: 4,
    },
    {
      questionId: 'fire_needsTheftCoverage',
      type: 'boolean',
      label: 'Needs theft/burglary coverage',
      labelHe: 'נדרש כיסוי גניבה/פריצה?',
      descriptionHe: 'האם נדרש כיסוי לגניבה ופריצה',
      required: true,
      policyAffinity: ['FIRE_CONSEQUENTIAL_LOSS'],
      order: 5,
    },
    {
      questionId: 'fire_acceptableDeductible',
      type: 'select',
      label: 'Acceptable deductible level',
      labelHe: 'רמת השתתפות עצמית',
      descriptionHe: 'רמת ההשתתפות העצמית המקובלת',
      required: true,
      options: [
        { value: 'low', label: 'Low', labelHe: 'נמוכה' },
        { value: 'medium', label: 'Medium', labelHe: 'בינונית' },
        { value: 'high', label: 'High', labelHe: 'גבוהה' },
        { value: 'very_high', label: 'Very High', labelHe: 'גבוהה מאוד' },
      ],
      policyAffinity: ['FIRE_CONSEQUENTIAL_LOSS'],
      order: 6,
    },
    {
      questionId: 'fire_propertyInTransitOrConstruction',
      type: 'boolean',
      label: 'Property in transit or under construction',
      labelHe: 'רכוש בהעברה או בבנייה?',
      descriptionHe: 'האם יש רכוש בהעברה או בשלבי בנייה',
      required: true,
      policyAffinity: ['FIRE_CONSEQUENTIAL_LOSS'],
      order: 7,
    },
  ],
};

// Section 2: Mechanical Breakdown (6q)
const mechanicalBreakdownSection: SectionData = {
  title: 'Mechanical Breakdown',
  titleHe: 'שבר מכונות',
  descriptionHe: 'שאלות ספציפיות לביטוח שבר מכונות',
  order: 11,
  showIf: [{ questionId: 'equipmentValue', operator: 'greaterThan', value: 0 }],
  questions: [
    {
      questionId: 'mech_machineryList',
      type: 'text',
      label: 'Machinery list and replacement values',
      labelHe: 'רשימת מכונות ושווי החלפה',
      descriptionHe: 'פרט את רשימת המכונות העיקריות ושווי ההחלפה שלהן',
      required: true,
      policyAffinity: ['EQUIPMENT_BREAKDOWN'],
      order: 0,
    },
    {
      questionId: 'mech_equipmentAge',
      type: 'select',
      label: 'Equipment age and condition',
      labelHe: 'גיל ומצב הציוד',
      descriptionHe: 'גיל ממוצע ומצב הציוד',
      required: true,
      options: [
        { value: 'new', label: 'New (under 1 year)', labelHe: 'חדש (עד שנה)' },
        { value: '1_5yr', label: '1-5 years', labelHe: '1-5 שנים' },
        { value: '5_10yr', label: '5-10 years', labelHe: '5-10 שנים' },
        { value: '10_plus', label: 'Over 10 years', labelHe: 'מעל 10 שנים' },
      ],
      riskWeight: 0.15,
      policyAffinity: ['EQUIPMENT_BREAKDOWN'],
      order: 1,
    },
    {
      questionId: 'mech_maintenanceSchedule',
      type: 'select',
      label: 'Maintenance schedule',
      labelHe: 'לוח תחזוקה',
      descriptionHe: 'סוג לוח התחזוקה לציוד',
      required: true,
      options: [
        { value: 'regular_contract', label: 'Regular contract maintenance', labelHe: 'תחזוקה בחוזה קבוע' },
        { value: 'regular_internal', label: 'Regular internal maintenance', labelHe: 'תחזוקה פנימית קבועה' },
        { value: 'irregular', label: 'Irregular maintenance', labelHe: 'תחזוקה לא סדירה' },
        { value: 'none', label: 'No maintenance schedule', labelHe: 'ללא לוח תחזוקה' },
      ],
      riskWeight: 0.2,
      policyAffinity: ['EQUIPMENT_BREAKDOWN'],
      order: 2,
    },
    {
      questionId: 'mech_hasFirePolicy',
      type: 'boolean',
      label: 'Has existing fire policy',
      labelHe: 'יש פוליסת אש קיימת?',
      descriptionHe: 'האם יש פוליסת ביטוח אש קיימת',
      required: true,
      policyAffinity: ['EQUIPMENT_BREAKDOWN'],
      order: 3,
    },
    {
      questionId: 'mech_specializedImportedEquipment',
      type: 'boolean',
      label: 'Specialized/imported equipment with hard-to-get parts',
      labelHe: 'ציוד מיוחד/מיובא עם חלקים קשים להשגה?',
      descriptionHe: 'האם יש ציוד מיוחד או מיובא עם חלפים קשים להשגה',
      required: true,
      riskWeight: 0.1,
      policyAffinity: ['EQUIPMENT_BREAKDOWN'],
      order: 4,
    },
    {
      questionId: 'mech_deductiblePreference',
      type: 'select',
      label: 'Deductible preference',
      labelHe: 'העדפת השתתפות עצמית',
      descriptionHe: 'רמת ההשתתפות העצמית המועדפת',
      required: true,
      options: [
        { value: 'low', label: 'Low', labelHe: 'נמוכה' },
        { value: 'medium', label: 'Medium', labelHe: 'בינונית' },
        { value: 'high', label: 'High', labelHe: 'גבוהה' },
        { value: 'very_high', label: 'Very High', labelHe: 'גבוהה מאוד' },
      ],
      policyAffinity: ['EQUIPMENT_BREAKDOWN'],
      order: 5,
    },
  ],
};

// Section 3: Third Party Liability (7q) - always visible
const tplSection: SectionData = {
  title: 'Third Party Liability',
  titleHe: 'אחריות כלפי צד שלישי',
  descriptionHe: 'שאלות ספציפיות לביטוח אחריות צד שלישי',
  order: 12,
  questions: [
    {
      questionId: 'tpl_businessNature',
      type: 'text',
      label: 'Nature of business activity',
      labelHe: 'אופי הפעילות העסקית',
      descriptionHe: 'תאר את אופי הפעילות העסקית לצורכי ביטוח צד ג\'',
      required: true,
      policyAffinity: ['GENERAL_LIABILITY'],
      order: 0,
    },
    {
      questionId: 'tpl_visitorsCustomers',
      type: 'number',
      label: 'Number of visitors/customers on premises',
      labelHe: 'מספר מבקרים/לקוחות בחצרים',
      descriptionHe: 'מספר ממוצע של מבקרים ולקוחות בחצרים ביום',
      required: true,
      min: 0,
      riskWeight: 0.1,
      policyAffinity: ['GENERAL_LIABILITY'],
      order: 1,
    },
    {
      questionId: 'tpl_usesSubcontractors',
      type: 'boolean',
      label: 'Uses subcontractors',
      labelHe: 'שימוש בקבלני משנה?',
      descriptionHe: 'האם העסק משתמש בקבלני משנה',
      required: true,
      policyAffinity: ['GENERAL_LIABILITY'],
      order: 2,
    },
    {
      questionId: 'tpl_organizesEvents',
      type: 'boolean',
      label: 'Organizes events or serves food',
      labelHe: 'מארגן אירועים / מגיש מזון?',
      descriptionHe: 'האם העסק מארגן אירועים או מגיש מזון',
      required: true,
      riskWeight: 0.1,
      policyAffinity: ['GENERAL_LIABILITY'],
      order: 3,
    },
    {
      questionId: 'tpl_employeesCarryWeapons',
      type: 'boolean',
      label: 'Employees carry weapons',
      labelHe: 'עובדים נושאים נשק?',
      descriptionHe: 'האם יש עובדים הנושאים נשק',
      required: true,
      riskWeight: 0.15,
      policyAffinity: ['GENERAL_LIABILITY'],
      order: 4,
    },
    {
      questionId: 'tpl_requiredLimits',
      type: 'currency',
      label: 'Required liability limits (per event and aggregate)',
      labelHe: 'גבול אחריות נדרש (לאירוע ומצטבר)',
      descriptionHe: 'גבול האחריות הנדרש לאירוע ומצטבר',
      required: true,
      min: 0,
      policyAffinity: ['GENERAL_LIABILITY'],
      order: 5,
    },
    {
      questionId: 'tpl_acceptableDeductible',
      type: 'select',
      label: 'Acceptable deductible level',
      labelHe: 'רמת השתתפות עצמית מקובלת',
      descriptionHe: 'רמת ההשתתפות העצמית המקובלת',
      required: true,
      options: [
        { value: 'low', label: 'Low', labelHe: 'נמוכה' },
        { value: 'medium', label: 'Medium', labelHe: 'בינונית' },
        { value: 'high', label: 'High', labelHe: 'גבוהה' },
        { value: 'very_high', label: 'Very High', labelHe: 'גבוהה מאוד' },
      ],
      policyAffinity: ['GENERAL_LIABILITY'],
      order: 6,
    },
  ],
};

// Section 4: Employers Liability (8q)
const employersLiabilitySection: SectionData = {
  title: 'Employers Liability',
  titleHe: 'חבות מעבידים',
  descriptionHe: 'שאלות ספציפיות לביטוח חבות מעבידים',
  order: 13,
  showIf: [{ questionId: 'employeeCount', operator: 'greaterThan', value: 0 }],
  questions: [
    {
      questionId: 'el_totalPayroll',
      type: 'currency',
      label: 'Total annual payroll',
      labelHe: 'סך שכר שנתי',
      descriptionHe: 'סך השכר השנתי הכולל של כל העובדים',
      required: true,
      min: 0,
      policyAffinity: ['EMPLOYER_LIABILITY'],
      order: 0,
    },
    {
      questionId: 'el_subcontractorWorkers',
      type: 'boolean',
      label: 'Employs subcontractor workers',
      labelHe: 'מעסיק עובדי קבלן משנה?',
      descriptionHe: 'האם מועסקים עובדי קבלן משנה',
      required: true,
      policyAffinity: ['EMPLOYER_LIABILITY'],
      order: 1,
    },
    {
      questionId: 'el_employeesAbroad',
      type: 'boolean',
      label: 'Sends employees abroad',
      labelHe: 'שולח עובדים לחו"ל?',
      descriptionHe: 'האם העסק שולח עובדים לעבודה בחו"ל',
      required: true,
      policyAffinity: ['EMPLOYER_LIABILITY'],
      order: 2,
    },
    {
      questionId: 'el_controllingShareholderPayroll',
      type: 'boolean',
      label: 'Controlling shareholders on payroll',
      labelHe: 'בעלי שליטה בשכר?',
      descriptionHe: 'האם בעלי שליטה מקבלים שכר ונדרש כיסוי עבורם',
      required: true,
      policyAffinity: ['EMPLOYER_LIABILITY'],
      order: 3,
    },
    {
      questionId: 'el_heldTerritoriesWorkers',
      type: 'boolean',
      label: 'Workers from held territories',
      labelHe: 'עובדים מהשטחים?',
      descriptionHe: 'האם מועסקים עובדים מהשטחים',
      required: true,
      riskWeight: 0.1,
      policyAffinity: ['EMPLOYER_LIABILITY'],
      order: 4,
    },
    {
      questionId: 'el_workplaceHazardType',
      type: 'select',
      label: 'Workplace environment type',
      labelHe: 'סוג סביבת עבודה',
      descriptionHe: 'סוג סביבת העבודה העיקרית',
      required: true,
      options: [
        { value: 'office', label: 'Office', labelHe: 'משרד' },
        { value: 'industrial', label: 'Industrial', labelHe: 'תעשייתי' },
        { value: 'construction', label: 'Construction', labelHe: 'בנייה' },
        { value: 'mixed', label: 'Mixed', labelHe: 'משולב' },
      ],
      riskWeight: 0.15,
      policyAffinity: ['EMPLOYER_LIABILITY'],
      order: 5,
    },
    {
      questionId: 'el_requiredLimits',
      type: 'currency',
      label: 'Required liability limits',
      labelHe: 'גבול אחריות נדרש',
      descriptionHe: 'גבול אחריות נדרש לחבות מעבידים',
      required: true,
      min: 0,
      policyAffinity: ['EMPLOYER_LIABILITY'],
      order: 6,
    },
    {
      questionId: 'el_nightShiftWork',
      type: 'boolean',
      label: 'Night shift work',
      labelHe: 'עבודה במשמרות לילה?',
      descriptionHe: 'האם יש עובדים העובדים במשמרות לילה',
      required: true,
      riskWeight: 0.1,
      policyAffinity: ['EMPLOYER_LIABILITY'],
      order: 7,
    },
  ],
};

// Section 5: Product Liability (8q)
const productLiabilitySection: SectionData = {
  title: 'Product Liability',
  titleHe: 'אחריות מוצר',
  descriptionHe: 'שאלות ספציפיות לביטוח אחריות מוצר',
  order: 14,
  showIf: [{ questionId: 'manufacturesProducts', operator: 'equals', value: true }],
  questions: [
    {
      questionId: 'prodLiab_productsDescription',
      type: 'text',
      label: 'Description of products manufactured/imported/distributed',
      labelHe: 'תיאור המוצרים המיוצרים/מיובאים/מופצים',
      descriptionHe: 'תאר את המוצרים שהחברה מייצרת, מייבאת או מפיצה',
      required: true,
      policyAffinity: ['PRODUCT_LIABILITY'],
      order: 0,
    },
    {
      questionId: 'prodLiab_annualProductTurnover',
      type: 'currency',
      label: 'Annual product turnover',
      labelHe: 'מחזור שנתי ממוצרים',
      descriptionHe: 'מחזור שנתי מפעילות מוצרים',
      required: true,
      min: 0,
      policyAffinity: ['PRODUCT_LIABILITY'],
      order: 1,
    },
    {
      questionId: 'prodLiab_exportActivity',
      type: 'boolean',
      label: 'Export activity',
      labelHe: 'פעילות יצוא?',
      descriptionHe: 'האם יש פעילות יצוא מוצרים',
      required: true,
      policyAffinity: ['PRODUCT_LIABILITY'],
      order: 2,
    },
    {
      questionId: 'prodLiab_exportPercentage',
      type: 'number',
      label: 'Export percentage',
      labelHe: 'אחוז יצוא',
      descriptionHe: 'אחוז היצוא מסך המכירות',
      required: true,
      min: 0,
      max: 100,
      showIf: [{ questionId: 'prodLiab_exportActivity', operator: 'equals', value: true }],
      policyAffinity: ['PRODUCT_LIABILITY'],
      order: 3,
    },
    {
      questionId: 'prodLiab_priorClaims',
      type: 'boolean',
      label: 'Prior claims or known defects',
      labelHe: 'תביעות קודמות או פגמים ידועים?',
      descriptionHe: 'האם היו תביעות קודמות בגין מוצרים או פגמים ידועים',
      required: true,
      riskWeight: 0.2,
      policyAffinity: ['PRODUCT_LIABILITY'],
      order: 4,
    },
    {
      questionId: 'prodLiab_downstreamDistributors',
      type: 'boolean',
      label: 'Downstream distributors requiring supplier extension',
      labelHe: 'מפיצים הדורשים הרחבת ספק?',
      descriptionHe: 'האם יש מפיצים שדורשים הרחבת כיסוי ספק',
      required: true,
      policyAffinity: ['PRODUCT_LIABILITY'],
      order: 5,
    },
    {
      questionId: 'prodLiab_installsOrRepairs',
      type: 'boolean',
      label: 'Performs installation or repair',
      labelHe: 'מבצע התקנה/תיקון?',
      descriptionHe: 'האם החברה מבצעת שירותי התקנה או תיקון של מוצרים',
      required: true,
      policyAffinity: ['PRODUCT_LIABILITY'],
      order: 6,
    },
    {
      questionId: 'prodLiab_requiredLimits',
      type: 'currency',
      label: 'Required liability limits',
      labelHe: 'גבול אחריות נדרש',
      descriptionHe: 'גבול אחריות נדרש לביטוח אחריות מוצר',
      required: true,
      min: 0,
      policyAffinity: ['PRODUCT_LIABILITY'],
      order: 7,
    },
  ],
};

// Section 6: Cash/Money (7q)
const cashMoneySection: SectionData = {
  title: 'Cash/Money Insurance',
  titleHe: 'ביטוח כספים',
  descriptionHe: 'שאלות ספציפיות לביטוח כספים ומזומנים',
  order: 15,
  showIf: [{ questionId: 'handlesCash', operator: 'equals', value: true }],
  questions: [
    {
      questionId: 'cash_maxOnPremises',
      type: 'currency',
      label: 'Maximum cash on premises',
      labelHe: 'מקסימום מזומן בחצרים',
      descriptionHe: 'סכום מזומן מקסימלי הנמצא בחצרים',
      required: true,
      min: 0,
      policyAffinity: ['CASH_MONEY'],
      order: 0,
    },
    {
      questionId: 'cash_maxInTransit',
      type: 'currency',
      label: 'Maximum cash in transit',
      labelHe: 'מקסימום מזומן בהעברה',
      descriptionHe: 'סכום מזומן מקסימלי בהעברה',
      required: true,
      min: 0,
      policyAffinity: ['CASH_MONEY'],
      order: 1,
    },
    {
      questionId: 'cash_transportMethod',
      type: 'select',
      label: 'Cash transport method',
      labelHe: 'אופן העברת מזומן',
      descriptionHe: 'אופן העברת מזומנים',
      required: true,
      options: [
        { value: 'employees', label: 'By employees', labelHe: 'על ידי עובדים' },
        { value: 'security_company', label: 'Security company', labelHe: 'חברת אבטחה' },
        { value: 'armored_vehicle', label: 'Armored vehicle', labelHe: 'רכב משוריין' },
      ],
      policyAffinity: ['CASH_MONEY'],
      order: 2,
    },
    {
      questionId: 'cash_keptAtManagerHomes',
      type: 'boolean',
      label: 'Cash kept at manager homes',
      labelHe: 'מזומן בבתי מנהלים?',
      descriptionHe: 'האם מזומן מוחזק בבתי מנהלים',
      required: true,
      riskWeight: 0.1,
      policyAffinity: ['CASH_MONEY'],
      order: 3,
    },
    {
      questionId: 'cash_usesNegotiableInstruments',
      type: 'boolean',
      label: 'Uses negotiable instruments',
      labelHe: 'שימוש בצ\'קים/שטרות סחירים?',
      descriptionHe: 'האם נעשה שימוש בצ\'קים או שטרות סחירים',
      required: true,
      policyAffinity: ['CASH_MONEY'],
      order: 4,
    },
    {
      questionId: 'cash_safeSecurityMeasures',
      type: 'multiselect',
      label: 'Safe security measures',
      labelHe: 'אמצעי אבטחת כספות',
      descriptionHe: 'אמצעי אבטחה לשמירת מזומנים',
      required: true,
      options: [
        { value: 'safe', label: 'Safe', labelHe: 'כספת' },
        { value: 'vault', label: 'Vault', labelHe: 'כספת ענק/חדר כספות' },
        { value: 'alarm', label: 'Alarm system', labelHe: 'מערכת אזעקה' },
        { value: 'cameras', label: 'Security cameras', labelHe: 'מצלמות אבטחה' },
        { value: 'guards', label: 'Security guards', labelHe: 'שומרים' },
      ],
      policyAffinity: ['CASH_MONEY'],
      order: 5,
    },
    {
      questionId: 'cash_workingHoursType',
      type: 'select',
      label: 'Working hours type',
      labelHe: 'סוג שעות עבודה',
      descriptionHe: 'סוג שעות העבודה של העסק',
      required: true,
      options: [
        { value: 'standard', label: 'Standard', labelHe: 'רגילות' },
        { value: 'extended', label: 'Extended', labelHe: 'מורחבות' },
        { value: '24_7', label: '24/7', labelHe: '24/7' },
      ],
      policyAffinity: ['CASH_MONEY'],
      order: 6,
    },
  ],
};

// Section 7: Fidelity/Crime (6q)
const fidelityCrimeSection: SectionData = {
  title: 'Fidelity/Crime Insurance',
  titleHe: 'ביטוח נאמנות עובדים',
  descriptionHe: 'שאלות ספציפיות לביטוח נאמנות עובדים ומעילות',
  order: 16,
  showIf: [{ questionId: 'employeesAccessFinancials', operator: 'equals', value: true }],
  questions: [
    {
      questionId: 'fidelity_employeesWithAccess',
      type: 'number',
      label: 'Employees with access to funds/assets',
      labelHe: 'מספר עובדים עם גישה לכספים/נכסים',
      descriptionHe: 'מספר עובדים שיש להם גישה לכספים או נכסים',
      required: true,
      min: 0,
      policyAffinity: ['FIDELITY_CRIME'],
      order: 0,
    },
    {
      questionId: 'fidelity_totalAssetsAtRisk',
      type: 'currency',
      label: 'Total assets at risk',
      labelHe: 'סך נכסים בסיכון',
      descriptionHe: 'סך הנכסים החשופים לסיכון מעילה',
      required: true,
      min: 0,
      policyAffinity: ['FIDELITY_CRIME'],
      order: 1,
    },
    {
      questionId: 'fidelity_internalControls',
      type: 'multiselect',
      label: 'Internal controls',
      labelHe: 'בקרות פנימיות',
      descriptionHe: 'אמצעי בקרה פנימיים קיימים',
      required: true,
      options: [
        { value: 'dual_signatures', label: 'Dual signatures', labelHe: 'חתימות כפולות' },
        { value: 'audits', label: 'Regular audits', labelHe: 'ביקורות סדירות' },
        { value: 'segregation', label: 'Segregation of duties', labelHe: 'הפרדת תפקידים' },
        { value: 'background_checks', label: 'Background checks', labelHe: 'בדיקות רקע' },
      ],
      policyAffinity: ['FIDELITY_CRIME'],
      order: 2,
    },
    {
      questionId: 'fidelity_priorDishonesty',
      type: 'boolean',
      label: 'Prior dishonesty incidents',
      labelHe: 'מקרי מעילה קודמים?',
      descriptionHe: 'האם היו מקרי מעילה או חוסר נאמנות קודמים',
      required: true,
      riskWeight: 0.25,
      policyAffinity: ['FIDELITY_CRIME'],
      order: 3,
    },
    {
      questionId: 'fidelity_retroactiveDate',
      type: 'boolean',
      label: 'Needs retroactive date',
      labelHe: 'נדרש תאריך רטרואקטיבי?',
      descriptionHe: 'האם נדרש תאריך רטרואקטיבי לכיסוי',
      required: true,
      policyAffinity: ['FIDELITY_CRIME'],
      order: 4,
    },
    {
      questionId: 'fidelity_requiredLimits',
      type: 'currency',
      label: 'Required liability limits',
      labelHe: 'גבול אחריות נדרש',
      descriptionHe: 'גבול אחריות נדרש לביטוח נאמנות',
      required: true,
      min: 0,
      policyAffinity: ['FIDELITY_CRIME'],
      order: 5,
    },
  ],
};

// Section 8: Cargo in Transit (7q)
const cargoTransitSection: SectionData = {
  title: 'Cargo in Transit',
  titleHe: 'ביטוח מטען בהעברה',
  descriptionHe: 'שאלות ספציפיות לביטוח מטען בהעברה',
  order: 17,
  showIf: [{ questionId: 'transportsGoods', operator: 'equals', value: true }],
  questions: [
    {
      questionId: 'cargo_maxValuePerShipment',
      type: 'currency',
      label: 'Maximum value per shipment',
      labelHe: 'שווי מקסימלי למשלוח',
      descriptionHe: 'שווי מקסימלי של משלוח בודד',
      required: true,
      min: 0,
      policyAffinity: ['CARGO_TRANSIT'],
      order: 0,
    },
    {
      questionId: 'cargo_annualCargoValue',
      type: 'currency',
      label: 'Annual total cargo value',
      labelHe: 'שווי שנתי כולל של מטענים',
      descriptionHe: 'שווי שנתי כולל של כל המטענים',
      required: true,
      min: 0,
      policyAffinity: ['CARGO_TRANSIT'],
      order: 1,
    },
    {
      questionId: 'cargo_goodsTypes',
      type: 'multiselect',
      label: 'Types of goods',
      labelHe: 'סוגי סחורות',
      descriptionHe: 'סוגי הסחורות המובלות',
      required: true,
      options: [
        { value: 'general', label: 'General goods', labelHe: 'סחורות כלליות' },
        { value: 'fragile', label: 'Fragile items', labelHe: 'פריטים שבירים' },
        { value: 'hazardous', label: 'Hazardous materials', labelHe: 'חומרים מסוכנים' },
        { value: 'perishable', label: 'Perishable goods', labelHe: 'סחורות מתכלות' },
        { value: 'high_value', label: 'High-value items', labelHe: 'פריטים יקרי ערך' },
      ],
      policyAffinity: ['CARGO_TRANSIT'],
      order: 2,
    },
    {
      questionId: 'cargo_ownVehiclesOrThirdParty',
      type: 'select',
      label: 'Own vehicles or third party carriers',
      labelHe: 'רכבים עצמיים או מובילים חיצוניים',
      descriptionHe: 'האם ההובלה ברכבים עצמיים או מובילים חיצוניים',
      required: true,
      options: [
        { value: 'own', label: 'Own vehicles', labelHe: 'רכבים עצמיים' },
        { value: 'third_party', label: 'Third party carriers', labelHe: 'מובילים חיצוניים' },
        { value: 'mixed', label: 'Mixed', labelHe: 'משולב' },
      ],
      policyAffinity: ['CARGO_TRANSIT'],
      order: 3,
    },
    {
      questionId: 'cargo_importExportActivity',
      type: 'boolean',
      label: 'Import/export activity',
      labelHe: 'פעילות יבוא/יצוא?',
      descriptionHe: 'האם יש פעילות יבוא או יצוא של מטענים',
      required: true,
      policyAffinity: ['CARGO_TRANSIT'],
      order: 4,
    },
    {
      questionId: 'cargo_vehicleSecurityMeasures',
      type: 'multiselect',
      label: 'Vehicle security measures',
      labelHe: 'אמצעי אבטחת רכבים',
      descriptionHe: 'אמצעי אבטחה ברכבי ההובלה',
      required: true,
      options: [
        { value: 'locks', label: 'Locks', labelHe: 'מנעולים' },
        { value: 'gps', label: 'GPS tracking', labelHe: 'מעקב GPS' },
        { value: 'alarm', label: 'Alarm system', labelHe: 'מערכת אזעקה' },
        { value: 'guarded_parking', label: 'Guarded parking', labelHe: 'חנייה שמורה' },
      ],
      policyAffinity: ['CARGO_TRANSIT'],
      order: 5,
    },
    {
      questionId: 'cargo_driverCompliance',
      type: 'boolean',
      label: 'All drivers properly licensed',
      labelHe: 'כל הנהגים עם רישיון מתאים?',
      descriptionHe: 'האם לכל הנהגים יש רישיון מתאים לסוג הרכב',
      required: true,
      policyAffinity: ['CARGO_TRANSIT'],
      order: 6,
    },
  ],
};

// Section 9: Terrorism (7q)
const terrorismSection: SectionData = {
  title: 'Terrorism Insurance',
  titleHe: 'ביטוח טרור',
  descriptionHe: 'שאלות ספציפיות לביטוח נזקי טרור',
  order: 18,
  showIf: [{ questionId: 'propertyOwnership', operator: 'notEquals', value: 'no_property' }],
  questions: [
    {
      questionId: 'terror_totalPropertyValue',
      type: 'currency',
      label: 'Total property value for terrorism insurance',
      labelHe: 'שווי רכוש לביטוח טרור',
      descriptionHe: 'שווי הרכוש הכולל לצורכי ביטוח טרור',
      required: true,
      min: 0,
      policyAffinity: ['TERRORISM'],
      order: 0,
    },
    {
      questionId: 'terror_expectedCompensationFund',
      type: 'currency',
      label: 'Expected compensation from property tax fund',
      labelHe: 'פיצוי צפוי מקרן מס רכוש',
      descriptionHe: 'הפיצוי הצפוי מקרן מס רכוש',
      required: true,
      min: 0,
      policyAffinity: ['TERRORISM'],
      order: 1,
    },
    {
      questionId: 'terror_coverageGap',
      type: 'currency',
      label: 'Required coverage gap',
      labelHe: 'פער כיסוי נדרש',
      descriptionHe: 'פער הכיסוי הנדרש מעבר לקרן מס רכוש',
      required: true,
      min: 0,
      policyAffinity: ['TERRORISM'],
      order: 2,
    },
    {
      questionId: 'terror_needsBI',
      type: 'boolean',
      label: 'Needs business interruption from terrorism',
      labelHe: 'נדרש כיסוי אבדן רווחים מטרור?',
      descriptionHe: 'האם נדרש כיסוי אבדן רווחים כתוצאה מאירוע טרור',
      required: true,
      policyAffinity: ['TERRORISM'],
      order: 3,
    },
    {
      questionId: 'terror_indemnityPeriod',
      type: 'select',
      label: 'Indemnity period',
      labelHe: 'תקופת שיפוי',
      descriptionHe: 'תקופת השיפוי הנדרשת לאובדן רווחים',
      required: true,
      options: [
        { value: '3', label: '3 months', labelHe: '3 חודשים' },
        { value: '6', label: '6 months', labelHe: '6 חודשים' },
        { value: '12', label: '12 months', labelHe: '12 חודשים' },
        { value: '18', label: '18 months', labelHe: '18 חודשים' },
        { value: '24', label: '24 months', labelHe: '24 חודשים' },
      ],
      policyAffinity: ['TERRORISM'],
      order: 4,
    },
    {
      questionId: 'terror_locationRisk',
      type: 'select',
      label: 'Location risk assessment',
      labelHe: 'הערכת סיכון מיקום',
      descriptionHe: 'הערכת רמת סיכון הטרור במיקום',
      required: true,
      options: [
        { value: 'low', label: 'Low', labelHe: 'נמוך' },
        { value: 'medium', label: 'Medium', labelHe: 'בינוני' },
        { value: 'high', label: 'High', labelHe: 'גבוה' },
        { value: 'critical', label: 'Critical', labelHe: 'קריטי' },
      ],
      riskWeight: 0.2,
      policyAffinity: ['TERRORISM'],
      order: 5,
    },
    {
      questionId: 'terror_hasFirePolicy',
      type: 'boolean',
      label: 'Has existing fire policy',
      labelHe: 'יש פוליסת אש קיימת?',
      descriptionHe: 'האם יש פוליסת ביטוח אש קיימת (לצורך תיאום כיסויים)',
      required: true,
      policyAffinity: ['TERRORISM'],
      order: 6,
    },
  ],
};

// Section 10: Electronic Equipment (13q)
const electronicEquipmentSection: SectionData = {
  title: 'Electronic Equipment',
  titleHe: 'ביטוח ציוד אלקטרוני',
  descriptionHe: 'שאלות ספציפיות לביטוח ציוד אלקטרוני',
  order: 19,
  showIf: [{ questionId: 'electronicEquipmentValue', operator: 'greaterThan', value: 0 }],
  questions: [
    {
      questionId: 'elecEquip_inventoryDescription',
      type: 'text',
      label: 'Electronic equipment inventory description',
      labelHe: 'תיאור ציוד אלקטרוני (יצרן, דגם, שנה, שווי)',
      descriptionHe: 'תאר את הציוד האלקטרוני כולל יצרן, דגם, שנת ייצור ושווי',
      required: true,
      policyAffinity: ['ELECTRONIC_EQUIPMENT'],
      order: 0,
    },
    {
      questionId: 'elecEquip_totalReplacementValue',
      type: 'currency',
      label: 'Total replacement value',
      labelHe: 'שווי החלפה כולל',
      descriptionHe: 'שווי החלפה כולל של כל הציוד האלקטרוני',
      required: true,
      min: 0,
      policyAffinity: ['ELECTRONIC_EQUIPMENT'],
      order: 1,
    },
    {
      questionId: 'elecEquip_leasedOrFinanced',
      type: 'boolean',
      label: 'Leased or financed equipment',
      labelHe: 'ציוד בליסינג/מימון?',
      descriptionHe: 'האם יש ציוד בליסינג או במימון',
      required: true,
      policyAffinity: ['ELECTRONIC_EQUIPMENT'],
      order: 2,
    },
    {
      questionId: 'elecEquip_portableVsFixed',
      type: 'select',
      label: 'Portable vs fixed equipment',
      labelHe: 'נייד מול קבוע',
      descriptionHe: 'חלוקת הציוד בין נייד לקבוע',
      required: true,
      options: [
        { value: 'mostly_fixed', label: 'Mostly fixed', labelHe: 'בעיקר קבוע' },
        { value: 'mostly_portable', label: 'Mostly portable', labelHe: 'בעיקר נייד' },
        { value: 'mixed', label: 'Mixed', labelHe: 'משולב' },
      ],
      policyAffinity: ['ELECTRONIC_EQUIPMENT'],
      order: 3,
    },
    {
      questionId: 'elecEquip_dataTypeAndVolume',
      type: 'select',
      label: 'Data type and volume',
      labelHe: 'סוג ונפח נתונים',
      descriptionHe: 'סוג ונפח הנתונים המאוחסנים על הציוד',
      required: true,
      options: [
        { value: 'minimal', label: 'Minimal', labelHe: 'מינימלי' },
        { value: 'moderate', label: 'Moderate', labelHe: 'בינוני' },
        { value: 'large', label: 'Large', labelHe: 'גדול' },
        { value: 'critical', label: 'Critical/Mission-critical', labelHe: 'קריטי' },
      ],
      policyAffinity: ['ELECTRONIC_EQUIPMENT'],
      order: 4,
    },
    {
      questionId: 'elecEquip_needsSoftwareCover',
      type: 'boolean',
      label: 'Needs comprehensive software coverage',
      labelHe: 'נדרש כיסוי תוכנה מקיף?',
      descriptionHe: 'האם נדרש כיסוי ביטוחי מקיף לתוכנה',
      required: true,
      policyAffinity: ['ELECTRONIC_EQUIPMENT'],
      order: 5,
    },
    {
      questionId: 'elecEquip_backupRegime',
      type: 'select',
      label: 'Backup regime',
      labelHe: 'משטר גיבוי',
      descriptionHe: 'תדירות הגיבוי של נתונים',
      required: true,
      options: [
        { value: 'daily', label: 'Daily', labelHe: 'יומי' },
        { value: 'weekly', label: 'Weekly', labelHe: 'שבועי' },
        { value: 'monthly', label: 'Monthly', labelHe: 'חודשי' },
        { value: 'none', label: 'None', labelHe: 'ללא' },
      ],
      riskWeight: 0.15,
      policyAffinity: ['ELECTRONIC_EQUIPMENT'],
      order: 6,
    },
    {
      questionId: 'elecEquip_antiVirusPatching',
      type: 'boolean',
      label: 'Anti-virus and system updates current',
      labelHe: 'אנטי-וירוס ועדכוני מערכת מעודכנים?',
      descriptionHe: 'האם תוכנת אנטי-וירוס ועדכוני מערכת מעודכנים',
      required: true,
      policyAffinity: ['ELECTRONIC_EQUIPMENT'],
      order: 7,
    },
    {
      questionId: 'elecEquip_upsInstalled',
      type: 'boolean',
      label: 'UPS systems installed',
      labelHe: 'מותקנות מערכות UPS?',
      descriptionHe: 'האם מותקנות מערכות אל-פסק (UPS)',
      required: true,
      policyAffinity: ['ELECTRONIC_EQUIPMENT'],
      order: 8,
    },
    {
      questionId: 'elecEquip_downtimeTolerance',
      type: 'select',
      label: 'Downtime tolerance',
      labelHe: 'סבילות להשבתה',
      descriptionHe: 'כמה זמן השבתה העסק יכול לספוג',
      required: true,
      options: [
        { value: 'hours', label: 'Hours', labelHe: 'שעות' },
        { value: '1_day', label: '1 day', labelHe: 'יום אחד' },
        { value: '3_days', label: '3 days', labelHe: '3 ימים' },
        { value: 'week', label: 'Week', labelHe: 'שבוע' },
      ],
      policyAffinity: ['ELECTRONIC_EQUIPMENT'],
      order: 9,
    },
    {
      questionId: 'elecEquip_dailyFinancialImpact',
      type: 'currency',
      label: 'Daily financial impact of downtime',
      labelHe: 'השפעה כספית יומית מהשבתה',
      descriptionHe: 'ההשפעה הכספית היומית של השבתת ציוד אלקטרוני',
      required: true,
      min: 0,
      policyAffinity: ['ELECTRONIC_EQUIPMENT'],
      order: 10,
    },
    {
      questionId: 'elecEquip_contractualPenalties',
      type: 'boolean',
      label: 'Contractual penalties for downtime',
      labelHe: 'קנסות חוזיות על השבתה?',
      descriptionHe: 'האם יש קנסות חוזיות על השבתה',
      required: true,
      policyAffinity: ['ELECTRONIC_EQUIPMENT'],
      order: 11,
    },
    {
      questionId: 'elecEquip_physicalSecurity',
      type: 'multiselect',
      label: 'Physical security measures',
      labelHe: 'אבטחה פיזית',
      descriptionHe: 'אמצעי אבטחה פיזיים לציוד אלקטרוני',
      required: true,
      options: [
        { value: 'ac', label: 'Air conditioning', labelHe: 'מיזוג אוויר' },
        { value: 'fire_suppression', label: 'Fire suppression', labelHe: 'כיבוי אש' },
        { value: 'access_control', label: 'Access control', labelHe: 'בקרת גישה' },
        { value: 'cctv', label: 'CCTV', labelHe: 'מצלמות אבטחה' },
      ],
      policyAffinity: ['ELECTRONIC_EQUIPMENT'],
      order: 12,
    },
  ],
};

// Section 11: Heavy/Engineering Equipment (14q)
const heavyEquipmentSection: SectionData = {
  title: 'Heavy/Engineering Equipment',
  titleHe: 'ביטוח ציוד מכני הנדסי',
  descriptionHe: 'שאלות ספציפיות לביטוח ציוד מכני הנדסי כבד',
  order: 20,
  showIf: [{ questionId: 'usesHeavyEquipment', operator: 'equals', value: true }],
  questions: [
    {
      questionId: 'heavyEquip_inventoryList',
      type: 'text',
      label: 'Equipment inventory list',
      labelHe: 'רשימת ציוד (סוג, יצרן, דגם, שנה, מספר סידורי, שווי)',
      descriptionHe: 'פרט את רשימת הציוד כולל סוג, יצרן, דגם, שנה, מספר סידורי ושווי',
      required: true,
      policyAffinity: ['HEAVY_EQUIPMENT'],
      order: 0,
    },
    {
      questionId: 'heavyEquip_totalValue',
      type: 'currency',
      label: 'Total current cash value',
      labelHe: 'שווי מזומן נוכחי כולל',
      descriptionHe: 'שווי מזומן נוכחי כולל של כל הציוד',
      required: true,
      min: 0,
      policyAffinity: ['HEAVY_EQUIPMENT'],
      order: 1,
    },
    {
      questionId: 'heavyEquip_ownershipType',
      type: 'select',
      label: 'Ownership type',
      labelHe: 'סוג בעלות',
      descriptionHe: 'סוג הבעלות על הציוד',
      required: true,
      options: [
        { value: 'own', label: 'Owned', labelHe: 'בבעלות' },
        { value: 'lease', label: 'Leased', labelHe: 'בליסינג' },
        { value: 'rent', label: 'Rented', labelHe: 'בשכירות' },
        { value: 'custody', label: 'In custody', labelHe: 'בחזקה' },
      ],
      policyAffinity: ['HEAVY_EQUIPMENT'],
      order: 2,
    },
    {
      questionId: 'heavyEquip_operatingLocations',
      type: 'text',
      label: 'Operating locations (territorial boundaries)',
      labelHe: 'מיקומי הפעלה (גבולות טריטוריאליים)',
      descriptionHe: 'תאר את מיקומי ההפעלה והגבולות הטריטוריאליים',
      required: true,
      policyAffinity: ['HEAVY_EQUIPMENT'],
      order: 3,
    },
    {
      questionId: 'heavyEquip_projectTypes',
      type: 'multiselect',
      label: 'Project types',
      labelHe: 'סוגי פרויקטים',
      descriptionHe: 'סוגי הפרויקטים שבהם נעשה שימוש בציוד',
      required: true,
      options: [
        { value: 'earthworks', label: 'Earthworks', labelHe: 'עבודות עפר' },
        { value: 'demolition', label: 'Demolition', labelHe: 'הריסות' },
        { value: 'paving', label: 'Paving', labelHe: 'סלילה' },
        { value: 'lifting', label: 'Lifting/Cranes', labelHe: 'הרמה/מנופים' },
        { value: 'drilling', label: 'Drilling', labelHe: 'קידוח' },
      ],
      policyAffinity: ['HEAVY_EQUIPMENT'],
      order: 4,
    },
    {
      questionId: 'heavyEquip_operatesNearWater',
      type: 'boolean',
      label: 'Operates near water',
      labelHe: 'פעילות ליד מים?',
      descriptionHe: 'האם הציוד פועל ליד מים (נהרות, ים, אגמים)',
      required: true,
      riskWeight: 0.15,
      policyAffinity: ['HEAVY_EQUIPMENT'],
      order: 5,
    },
    {
      questionId: 'heavyEquip_allOperatorsLicensed',
      type: 'boolean',
      label: 'All operators licensed',
      labelHe: 'כל המפעילים בעלי רישיון?',
      descriptionHe: 'האם כל מפעילי הציוד בעלי רישיון מתאים',
      required: true,
      policyAffinity: ['HEAVY_EQUIPMENT'],
      order: 6,
    },
    {
      questionId: 'heavyEquip_storageArrangements',
      type: 'select',
      label: 'Storage arrangements',
      labelHe: 'סידורי אחסון',
      descriptionHe: 'סידורי אחסון הציוד בתום יום עבודה',
      required: true,
      options: [
        { value: 'guarded_yard', label: 'Guarded yard', labelHe: 'מגרש שמור' },
        { value: 'locked_site', label: 'Locked construction site', labelHe: 'אתר בנייה נעול' },
        { value: 'open_site', label: 'Open site', labelHe: 'אתר פתוח' },
        { value: 'client_site', label: 'Client site', labelHe: 'אתר לקוח' },
      ],
      policyAffinity: ['HEAVY_EQUIPMENT'],
      order: 7,
    },
    {
      questionId: 'heavyEquip_needsTheftCoverage',
      type: 'boolean',
      label: 'Needs theft/robbery coverage',
      labelHe: 'נדרש כיסוי גניבה/שוד?',
      descriptionHe: 'האם נדרש כיסוי לגניבה ושוד ציוד',
      required: true,
      policyAffinity: ['HEAVY_EQUIPMENT'],
      order: 8,
    },
    {
      questionId: 'heavyEquip_needsSalvageTowing',
      type: 'boolean',
      label: 'Needs salvage/towing coverage',
      labelHe: 'נדרש כיסוי חילוץ/גרירה?',
      descriptionHe: 'האם נדרש כיסוי לחילוץ וגרירת ציוד',
      required: true,
      policyAffinity: ['HEAVY_EQUIPMENT'],
      order: 9,
    },
    {
      questionId: 'heavyEquip_claimsHistory',
      type: 'boolean',
      label: 'Claims history (3-5 years)',
      labelHe: 'היסטוריית תביעות (3-5 שנים)?',
      descriptionHe: 'האם היו תביעות ביטוח ציוד ב-3-5 שנים אחרונות',
      required: true,
      riskWeight: 0.15,
      policyAffinity: ['HEAVY_EQUIPMENT'],
      order: 10,
    },
    {
      questionId: 'heavyEquip_securityMeasures',
      type: 'multiselect',
      label: 'Security measures',
      labelHe: 'אמצעי אבטחה',
      descriptionHe: 'אמצעי אבטחה לציוד כבד',
      required: true,
      options: [
        { value: 'locks', label: 'Locks', labelHe: 'מנעולים' },
        { value: 'gps', label: 'GPS tracking', labelHe: 'מעקב GPS' },
        { value: 'guards', label: 'Security guards', labelHe: 'שומרים' },
        { value: 'fencing', label: 'Fencing', labelHe: 'גידור' },
        { value: 'cameras', label: 'CCTV cameras', labelHe: 'מצלמות' },
      ],
      policyAffinity: ['HEAVY_EQUIPMENT'],
      order: 11,
    },
    {
      questionId: 'heavyEquip_maintenanceProgram',
      type: 'boolean',
      label: 'Regular maintenance program',
      labelHe: 'תוכנית תחזוקה סדירה ותעודות בדיקה?',
      descriptionHe: 'האם יש תוכנית תחזוקה סדירה לציוד',
      required: true,
      policyAffinity: ['HEAVY_EQUIPMENT'],
      order: 12,
    },
    {
      questionId: 'heavyEquip_inspectionCertificates',
      type: 'boolean',
      label: 'Valid inspection certificates',
      labelHe: 'תעודות בדיקה בתוקף?',
      descriptionHe: 'האם יש תעודות בדיקה בתוקף לכל הציוד',
      required: true,
      policyAffinity: ['HEAVY_EQUIPMENT'],
      order: 13,
    },
  ],
};

// Section 12: Contractor Works / CAR (22q)
const contractorWorksSection: SectionData = {
  title: 'Contractor All Risks (CAR)',
  titleHe: 'ביטוח עבודות קבלניות',
  descriptionHe: 'שאלות ספציפיות לביטוח כל הסיכונים לקבלנים',
  order: 21,
  showIf: [{ questionId: 'performsConstructionWork', operator: 'equals', value: true }],
  questions: [
    {
      questionId: 'car_projectNature',
      type: 'select',
      label: 'Nature of project',
      labelHe: 'אופי הפרויקט',
      descriptionHe: 'אופי הפרויקט העיקרי',
      required: true,
      options: [
        { value: 'new_construction', label: 'New construction', labelHe: 'בנייה חדשה' },
        { value: 'renovation', label: 'Renovation', labelHe: 'שיפוץ' },
        { value: 'erection', label: 'Erection/Assembly', labelHe: 'הרכבה/הקמה' },
        { value: 'civil', label: 'Civil works', labelHe: 'עבודות אזרחיות' },
        { value: 'infrastructure', label: 'Infrastructure', labelHe: 'תשתיות' },
      ],
      policyAffinity: ['CAR_INSURANCE'],
      order: 0,
    },
    {
      questionId: 'car_worksDescription',
      type: 'text',
      label: 'Detailed description of works',
      labelHe: 'תיאור מפורט של העבודות',
      descriptionHe: 'תיאור מפורט של העבודות המבוצעות',
      required: true,
      policyAffinity: ['CAR_INSURANCE'],
      order: 1,
    },
    {
      questionId: 'car_siteLocation',
      type: 'text',
      label: 'Site location (territorial boundaries, zone B/C)',
      labelHe: 'מיקום האתר (גבולות טריטוריאליים, אזור B/C)',
      descriptionHe: 'מיקום האתר כולל גבולות טריטוריאליים ואזור',
      required: true,
      policyAffinity: ['CAR_INSURANCE'],
      order: 2,
    },
    {
      questionId: 'car_totalContractValue',
      type: 'currency',
      label: 'Total contract value including materials',
      labelHe: 'שווי חוזה כולל כולל חומרים',
      descriptionHe: 'שווי החוזה הכולל כולל חומרים',
      required: true,
      min: 0,
      policyAffinity: ['CAR_INSURANCE'],
      order: 3,
    },
    {
      questionId: 'car_expectedDuration',
      type: 'select',
      label: 'Expected project duration',
      labelHe: 'משך פרויקט צפוי',
      descriptionHe: 'משך הפרויקט הצפוי',
      required: true,
      options: [
        { value: '3m', label: '3 months', labelHe: '3 חודשים' },
        { value: '6m', label: '6 months', labelHe: '6 חודשים' },
        { value: '12m', label: '12 months', labelHe: '12 חודשים' },
        { value: '18m', label: '18 months', labelHe: '18 חודשים' },
        { value: '24m', label: '24 months', labelHe: '24 חודשים' },
        { value: '36m_plus', label: '36+ months', labelHe: 'מעל 36 חודשים' },
      ],
      policyAffinity: ['CAR_INSURANCE'],
      order: 4,
    },
    {
      questionId: 'car_maintenancePeriod',
      type: 'select',
      label: 'Maintenance/warranty period',
      labelHe: 'תקופת תחזוקה/אחריות',
      descriptionHe: 'תקופת התחזוקה או האחריות לאחר השלמת העבודות',
      required: true,
      options: [
        { value: 'none', label: 'None', labelHe: 'ללא' },
        { value: '3m', label: '3 months', labelHe: '3 חודשים' },
        { value: '6m', label: '6 months', labelHe: '6 חודשים' },
        { value: '12m', label: '12 months', labelHe: '12 חודשים' },
        { value: '24m', label: '24 months', labelHe: '24 חודשים' },
      ],
      policyAffinity: ['CAR_INSURANCE'],
      order: 5,
    },
    {
      questionId: 'car_projectOwner',
      type: 'text',
      label: 'Project owner/client',
      labelHe: 'מזמין העבודה',
      descriptionHe: 'שם מזמין העבודה',
      required: true,
      policyAffinity: ['CAR_INSURANCE'],
      order: 6,
    },
    {
      questionId: 'car_hasSubContractors',
      type: 'boolean',
      label: 'Subcontractors involved',
      labelHe: 'קבלני משנה מעורבים?',
      descriptionHe: 'האם קבלני משנה מעורבים בפרויקט',
      required: true,
      policyAffinity: ['CAR_INSURANCE'],
      order: 7,
    },
    {
      questionId: 'car_subContractorCount',
      type: 'number',
      label: 'Number of subcontractors',
      labelHe: 'מספר קבלני משנה',
      descriptionHe: 'מספר קבלני משנה בפרויקט',
      required: true,
      min: 0,
      showIf: [{ questionId: 'car_hasSubContractors', operator: 'equals', value: true }],
      policyAffinity: ['CAR_INSURANCE'],
      order: 8,
    },
    {
      questionId: 'car_totalWorkerCount',
      type: 'number',
      label: 'Total workers (direct + subcontractor)',
      labelHe: 'סה"כ עובדים (ישירים + קבלן)',
      descriptionHe: 'סה"כ עובדים באתר כולל עובדי קבלן משנה',
      required: true,
      min: 0,
      policyAffinity: ['CAR_INSURANCE'],
      order: 9,
    },
    {
      questionId: 'car_palestinianWorkers',
      type: 'boolean',
      label: 'Palestinian workers',
      labelHe: 'עובדים מהשטחים?',
      descriptionHe: 'האם מועסקים עובדים מהשטחים',
      required: true,
      riskWeight: 0.1,
      policyAffinity: ['CAR_INSURANCE'],
      order: 10,
    },
    {
      questionId: 'car_financialLiens',
      type: 'boolean',
      label: 'Financial liens from banks/institutions',
      labelHe: 'שעבודים של בנקים/מוסדות פיננסיים?',
      descriptionHe: 'האם יש שעבודים של בנקים או מוסדות פיננסיים על הפרויקט',
      required: true,
      policyAffinity: ['CAR_INSURANCE'],
      order: 11,
    },
    {
      questionId: 'car_additionalInsureds',
      type: 'boolean',
      label: 'Additional insureds required (client, architect)',
      labelHe: 'מבוטחים נוספים נדרשים? (מזמין, אדריכל)',
      descriptionHe: 'האם נדרש לכלול מבוטחים נוספים כגון מזמין עבודה או אדריכל',
      required: true,
      policyAffinity: ['CAR_INSURANCE'],
      order: 12,
    },
    {
      questionId: 'car_nearExistingBuildings',
      type: 'boolean',
      label: 'Near existing buildings/infrastructure (vibration risk)',
      labelHe: 'ליד מבנים/תשתיות קיימים? (סיכון רטט)',
      descriptionHe: 'האם העבודות מבוצעות ליד מבנים או תשתיות קיימים',
      required: true,
      riskWeight: 0.1,
      policyAffinity: ['CAR_INSURANCE'],
      order: 13,
    },
    {
      questionId: 'car_undergroundUtilities',
      type: 'boolean',
      label: 'Underground utilities on site',
      labelHe: 'תשתיות תת-קרקעיות באתר?',
      descriptionHe: 'האם יש תשתיות תת-קרקעיות באתר הבנייה',
      required: true,
      riskWeight: 0.1,
      policyAffinity: ['CAR_INSURANCE'],
      order: 14,
    },
    {
      questionId: 'car_usesHeavyLifting',
      type: 'boolean',
      label: 'Uses cranes/heavy lifting',
      labelHe: 'שימוש במנופים/הרמה כבדה?',
      descriptionHe: 'האם נעשה שימוש במנופים או ציוד הרמה כבד',
      required: true,
      policyAffinity: ['CAR_INSURANCE'],
      order: 15,
    },
    {
      questionId: 'car_earthquakeZone',
      type: 'boolean',
      label: 'Earthquake zone',
      labelHe: 'אזור רעידות אדמה?',
      descriptionHe: 'האם האתר נמצא באזור המועד לרעידות אדמה',
      required: true,
      policyAffinity: ['CAR_INSURANCE'],
      order: 16,
    },
    {
      questionId: 'car_weaponsOnSite',
      type: 'boolean',
      label: 'Weapons on site',
      labelHe: 'נשק באתר?',
      descriptionHe: 'האם יש נשק באתר הבנייה',
      required: true,
      riskWeight: 0.1,
      policyAffinity: ['CAR_INSURANCE'],
      order: 17,
    },
    {
      questionId: 'car_workersAbroadTravel',
      type: 'boolean',
      label: 'Workers/equipment travel abroad',
      labelHe: 'עובדים/ציוד נוסעים לחו"ל?',
      descriptionHe: 'האם עובדים או ציוד נוסעים לחו"ל',
      required: true,
      policyAffinity: ['CAR_INSURANCE'],
      order: 18,
    },
    {
      questionId: 'car_unoccupiedSecurity',
      type: 'select',
      label: 'Security when site unoccupied',
      labelHe: 'אבטחה כשאתר לא מאויש',
      descriptionHe: 'אמצעי אבטחה כשהאתר לא מאויש',
      required: true,
      options: [
        { value: 'guards', label: 'Security guards', labelHe: 'שומרים' },
        { value: 'cameras', label: 'CCTV cameras', labelHe: 'מצלמות' },
        { value: 'fencing', label: 'Fencing only', labelHe: 'גידור בלבד' },
        { value: 'none', label: 'None', labelHe: 'ללא' },
      ],
      policyAffinity: ['CAR_INSURANCE'],
      order: 19,
    },
    {
      questionId: 'car_tplElLimits',
      type: 'currency',
      label: 'TPL and EL limits',
      labelHe: 'גבולות אחריות TPL ו-EL',
      descriptionHe: 'גבולות אחריות נדרשים לצד שלישי וחבות מעבידים',
      required: true,
      min: 0,
      policyAffinity: ['CAR_INSURANCE'],
      order: 20,
    },
    {
      questionId: 'car_turnkeyProject',
      type: 'boolean',
      label: 'Turnkey/BOT project',
      labelHe: 'פרויקט טורנקי/BOT?',
      descriptionHe: 'האם מדובר בפרויקט טורנקי או BOT',
      required: true,
      policyAffinity: ['CAR_INSURANCE'],
      order: 21,
    },
  ],
};

// ============================================================
// BUILD SECTOR TEMPLATES
// ============================================================

function buildConstructionTemplate() {
  return [
    companyInfoSection,
    assetsPropertySection,
    constructionProjectsSection,
    { ...riskExposuresSection, order: 3 },
    { ...operationsSection, order: 4 },
    { ...insuranceHistorySection, order: 5 },
    { ...insuranceNeedsSection, order: 6 },
    // Product-specific sections
    { ...fireConsequentialLossSection, order: 10 },
    { ...mechanicalBreakdownSection, order: 11 },
    { ...tplSection, order: 12 },
    { ...employersLiabilitySection, order: 13 },
    { ...cashMoneySection, order: 15 },
    { ...fidelityCrimeSection, order: 16 },
    { ...cargoTransitSection, order: 17 },
    { ...terrorismSection, order: 18 },
    { ...heavyEquipmentSection, order: 20 },
    { ...contractorWorksSection, order: 21 },
  ];
}

function buildTechnologyTemplate() {
  return [
    companyInfoSection,
    assetsPropertySection,
    technologyServicesSection,
    dataSecuritySection,
    { ...operationsSection, order: 4 },
    { ...insuranceHistorySection, order: 5 },
    { ...insuranceNeedsSection, order: 6 },
    // Product-specific sections
    { ...fireConsequentialLossSection, order: 10 },
    { ...tplSection, order: 12 },
    { ...employersLiabilitySection, order: 13 },
    { ...productLiabilitySection, order: 14 },
    { ...fidelityCrimeSection, order: 16 },
    { ...terrorismSection, order: 18 },
    { ...electronicEquipmentSection, order: 19 },
  ];
}

function buildManufacturingTemplate() {
  return [
    companyInfoSection,
    assetsPropertySection,
    manufacturingOperationsSection,
    { ...riskExposuresSection, order: 3 },
    { ...operationsSection, order: 4 },
    { ...insuranceHistorySection, order: 5 },
    { ...insuranceNeedsSection, order: 6 },
    // Product-specific sections
    { ...fireConsequentialLossSection, order: 10 },
    { ...mechanicalBreakdownSection, order: 11 },
    { ...tplSection, order: 12 },
    { ...employersLiabilitySection, order: 13 },
    { ...productLiabilitySection, order: 14 },
    { ...cashMoneySection, order: 15 },
    { ...fidelityCrimeSection, order: 16 },
    { ...cargoTransitSection, order: 17 },
    { ...terrorismSection, order: 18 },
    { ...electronicEquipmentSection, order: 19 },
  ];
}

function buildRetailTemplate() {
  return [
    companyInfoSection,
    assetsPropertySection,
    retailOperationsSection,
    { ...riskExposuresSection, order: 3 },
    { ...operationsSection, order: 4 },
    { ...insuranceHistorySection, order: 5 },
    { ...insuranceNeedsSection, order: 6 },
    // Product-specific sections
    { ...fireConsequentialLossSection, order: 10 },
    { ...tplSection, order: 12 },
    { ...employersLiabilitySection, order: 13 },
    { ...productLiabilitySection, order: 14 },
    { ...cashMoneySection, order: 15 },
    { ...fidelityCrimeSection, order: 16 },
    { ...cargoTransitSection, order: 17 },
    { ...terrorismSection, order: 18 },
    { ...electronicEquipmentSection, order: 19 },
  ];
}

function buildHealthcareTemplate() {
  return [
    companyInfoSection,
    assetsPropertySection,
    healthcareServicesSection,
    { ...riskExposuresSection, order: 3 },
    { ...operationsSection, order: 4 },
    { ...insuranceHistorySection, order: 5 },
    { ...insuranceNeedsSection, order: 6 },
    // Product-specific sections
    { ...fireConsequentialLossSection, order: 10 },
    { ...mechanicalBreakdownSection, order: 11 },
    { ...tplSection, order: 12 },
    { ...employersLiabilitySection, order: 13 },
    { ...productLiabilitySection, order: 14 },
    { ...cashMoneySection, order: 15 },
    { ...fidelityCrimeSection, order: 16 },
    { ...terrorismSection, order: 18 },
    { ...electronicEquipmentSection, order: 19 },
  ];
}

function buildLogisticsTemplate() {
  return [
    companyInfoSection,
    assetsPropertySection,
    logisticsOperationsSection,
    { ...riskExposuresSection, order: 3 },
    { ...operationsSection, order: 4 },
    { ...insuranceHistorySection, order: 5 },
    { ...insuranceNeedsSection, order: 6 },
    // Product-specific sections
    { ...fireConsequentialLossSection, order: 10 },
    { ...mechanicalBreakdownSection, order: 11 },
    { ...tplSection, order: 12 },
    { ...employersLiabilitySection, order: 13 },
    { ...cashMoneySection, order: 15 },
    { ...fidelityCrimeSection, order: 16 },
    { ...cargoTransitSection, order: 17 },
    { ...terrorismSection, order: 18 },
    { ...heavyEquipmentSection, order: 20 },
  ];
}

function buildConsultingTemplate() {
  return [
    companyInfoSection,
    assetsPropertySection,
    consultingServicesSection,
    { ...operationsSection, order: 3 },
    { ...riskExposuresSection, order: 4 },
    { ...insuranceHistorySection, order: 5 },
    { ...insuranceNeedsSection, order: 6 },
    // Product-specific sections
    { ...fireConsequentialLossSection, order: 10 },
    { ...tplSection, order: 12 },
    { ...employersLiabilitySection, order: 13 },
    { ...productLiabilitySection, order: 14 },
    { ...fidelityCrimeSection, order: 16 },
    { ...terrorismSection, order: 18 },
    { ...electronicEquipmentSection, order: 19 },
  ];
}

function buildGenericTemplate() {
  return [
    companyInfoSection,
    assetsPropertySection,
    operationsSection,
    riskExposuresSection,
    { ...insuranceHistorySection, order: 4 },
    { ...insuranceNeedsSection, order: 5 },
    // All product-specific sections (conditionally visible)
    { ...fireConsequentialLossSection, order: 10 },
    { ...mechanicalBreakdownSection, order: 11 },
    { ...tplSection, order: 12 },
    { ...employersLiabilitySection, order: 13 },
    { ...productLiabilitySection, order: 14 },
    { ...cashMoneySection, order: 15 },
    { ...fidelityCrimeSection, order: 16 },
    { ...cargoTransitSection, order: 17 },
    { ...terrorismSection, order: 18 },
    { ...electronicEquipmentSection, order: 19 },
    { ...heavyEquipmentSection, order: 20 },
    { ...contractorWorksSection, order: 21 },
  ];
}

// ============================================================
// COMPREHENSIVE COVERAGE RULES
// ============================================================

const comprehensiveRules = [
  // Company Size Rules (Priority 10)
  {
    name: 'Micro company',
    nameHe: 'חברה זעירה',
    description: 'Adjustment for companies under 10 employees',
    descriptionHe: 'התאמה לחברות עם פחות מ-10 עובדים',
    priority: 10,
    conditions: [{ field: 'employeeCount', operator: 'lessThan', value: 10 }],
    actions: [{ type: 'adjustLimit', policyType: 'EMPLOYER_LIABILITY', multiplier: 0.5 }],
  },
  {
    name: 'Small company',
    nameHe: 'חברה קטנה',
    description: 'Adjustment for 10-50 employees',
    descriptionHe: 'התאמה לחברות עם 10-50 עובדים',
    priority: 10,
    conditions: [
      { field: 'employeeCount', operator: 'greaterThan', value: 9 },
      { field: 'employeeCount', operator: 'lessThan', value: 51 },
    ],
    actions: [{ type: 'adjustLimit', policyType: 'EMPLOYER_LIABILITY', multiplier: 0.75 }],
  },
  {
    name: 'Medium company',
    nameHe: 'חברה בינונית',
    description: 'Standard for 50-200 employees',
    descriptionHe: 'סטנדרטי לחברות עם 50-200 עובדים',
    priority: 10,
    conditions: [
      { field: 'employeeCount', operator: 'greaterThan', value: 49 },
      { field: 'employeeCount', operator: 'lessThan', value: 201 },
    ],
    actions: [{ type: 'adjustLimit', policyType: 'EMPLOYER_LIABILITY', multiplier: 1.0 }],
  },
  {
    name: 'Large company',
    nameHe: 'חברה גדולה',
    description: 'Increased limits for 200+ employees',
    descriptionHe: 'הגדלת סכומים לחברות עם 200+ עובדים',
    priority: 10,
    conditions: [{ field: 'employeeCount', operator: 'greaterThan', value: 200 }],
    actions: [{ type: 'adjustLimit', policyType: 'EMPLOYER_LIABILITY', multiplier: 1.5 }],
  },

  // Revenue Rules (Priority 20)
  {
    name: 'High revenue company',
    nameHe: 'חברת מחזור גבוה',
    description: 'Increased limits for revenue over 50M',
    descriptionHe: 'הגדלת סכומים למחזור מעל 50 מיליון',
    priority: 20,
    conditions: [{ field: 'annualRevenue', operator: 'greaterThan', value: 50000000 }],
    actions: [
      { type: 'adjustLimit', policyType: 'GENERAL_LIABILITY', multiplier: 1.5 },
      { type: 'adjustLimit', policyType: 'PROFESSIONAL_INDEMNITY', multiplier: 1.5 },
    ],
  },
  {
    name: 'Very high revenue',
    nameHe: 'מחזור גבוה מאוד',
    description: 'Premium limits for revenue over 200M',
    descriptionHe: 'סכומים מוגדלים למחזור מעל 200 מיליון',
    priority: 20,
    conditions: [{ field: 'annualRevenue', operator: 'greaterThan', value: 200000000 }],
    actions: [
      { type: 'adjustLimit', policyType: 'GENERAL_LIABILITY', multiplier: 2.0 },
      { type: 'setMandatory', policyType: 'DIRECTORS_OFFICERS', mandatory: true },
    ],
  },

  // Risk Exposure Rules (Priority 30)
  {
    name: 'Hazardous materials handling',
    nameHe: 'טיפול בחומרים מסוכנים',
    description: 'Additional coverage for hazardous materials',
    descriptionHe: 'כיסוי נוסף לעבודה עם חומרים מסוכנים',
    priority: 30,
    conditions: [{ field: 'hazardousMaterials', operator: 'equals', value: true }],
    actions: [
      { type: 'adjustLimit', policyType: 'GENERAL_LIABILITY', multiplier: 1.5 },
      { type: 'addEndorsement', policyType: 'GENERAL_LIABILITY', endorsement: 'כיסוי חומרים מסוכנים' },
      { type: 'setMandatory', policyType: 'ENVIRONMENTAL_LIABILITY', mandatory: true },
    ],
  },
  {
    name: 'Height work coverage',
    nameHe: 'כיסוי עבודה בגובה',
    description: 'Additional coverage for work at height',
    descriptionHe: 'כיסוי נוסף לעבודה בגובה',
    priority: 30,
    conditions: [{ field: 'heightWork', operator: 'equals', value: true }],
    actions: [
      { type: 'adjustLimit', policyType: 'EMPLOYER_LIABILITY', multiplier: 1.3 },
      { type: 'addEndorsement', policyType: 'EMPLOYER_LIABILITY', endorsement: 'עבודה בגובה' },
    ],
  },
  {
    name: 'Food handling requirements',
    nameHe: 'דרישות טיפול במזון',
    description: 'Mandatory product liability for food handling',
    descriptionHe: 'אחריות מוצר חובה לטיפול במזון',
    priority: 30,
    conditions: [{ field: 'foodHandling', operator: 'equals', value: true }],
    actions: [
      { type: 'setMandatory', policyType: 'PRODUCT_LIABILITY', mandatory: true },
      { type: 'addEndorsement', policyType: 'PRODUCT_LIABILITY', endorsement: 'כיסוי מזון' },
    ],
  },
  {
    name: 'Medical services coverage',
    nameHe: 'כיסוי שירותים רפואיים',
    description: 'Mandatory malpractice coverage for medical services',
    descriptionHe: 'ביטוח רשלנות רפואית חובה',
    priority: 30,
    conditions: [{ field: 'medicalServices', operator: 'equals', value: true }],
    actions: [
      { type: 'setMandatory', policyType: 'MEDICAL_MALPRACTICE', mandatory: true },
      { type: 'adjustLimit', policyType: 'MEDICAL_MALPRACTICE', multiplier: 1.5 },
    ],
  },
  {
    name: 'Children services coverage',
    nameHe: 'כיסוי שירותים לילדים',
    description: 'Enhanced liability for children services',
    descriptionHe: 'אחריות מוגברת לשירותים לילדים',
    priority: 30,
    conditions: [{ field: 'childrenServices', operator: 'equals', value: true }],
    actions: [
      { type: 'adjustLimit', policyType: 'GENERAL_LIABILITY', multiplier: 1.4 },
      { type: 'addEndorsement', policyType: 'GENERAL_LIABILITY', endorsement: 'אחריות לילדים' },
    ],
  },

  // Data & Cyber Rules (Priority 40)
  {
    name: 'Personal data handling',
    nameHe: 'טיפול במידע אישי',
    description: 'Mandatory cyber for PII handling',
    descriptionHe: 'ביטוח סייבר חובה לטיפול במידע אישי',
    priority: 40,
    conditions: [{ field: 'handlesPersonalData', operator: 'equals', value: true }],
    actions: [
      { type: 'setMandatory', policyType: 'CYBER_LIABILITY', mandatory: true },
      { type: 'adjustLimit', policyType: 'CYBER_LIABILITY', multiplier: 1.3 },
    ],
  },
  {
    name: 'Large data volumes',
    nameHe: 'נפחי מידע גדולים',
    description: 'Enhanced cyber for large data volumes',
    descriptionHe: 'ביטוח סייבר מוגבר לנפחי מידע גדולים',
    priority: 40,
    conditions: [{ field: 'dataRecordsCount', operator: 'in', value: ['100k_1m', 'over_1m'] }],
    actions: [{ type: 'adjustLimit', policyType: 'CYBER_LIABILITY', multiplier: 2.0 }],
  },
  {
    name: 'Security certification discount',
    nameHe: 'הנחת הסמכת אבטחה',
    description: 'Reduced premiums for security certifications',
    descriptionHe: 'הפחתה לחברות עם הסמכות אבטחה',
    priority: 40,
    conditions: [{ field: 'hasSecurityCertification', operator: 'equals', value: true }],
    actions: [{ type: 'adjustLimit', policyType: 'CYBER_LIABILITY', multiplier: 0.85 }],
  },

  // International Operations Rules (Priority 50)
  {
    name: 'International operations',
    nameHe: 'פעילות בינלאומית',
    description: 'Coverage adjustments for international operations',
    descriptionHe: 'התאמות כיסוי לפעילות בינלאומית',
    priority: 50,
    conditions: [{ field: 'hasInternationalOps', operator: 'equals', value: true }],
    actions: [
      { type: 'adjustLimit', policyType: 'GENERAL_LIABILITY', multiplier: 1.3 },
      { type: 'addEndorsement', policyType: 'GENERAL_LIABILITY', endorsement: 'כיסוי בינלאומי' },
    ],
  },
  {
    name: 'US operations coverage',
    nameHe: 'כיסוי פעילות בארה"ב',
    description: 'Enhanced coverage for US operations',
    descriptionHe: 'כיסוי מוגבר לפעילות בארה"ב',
    priority: 50,
    conditions: [{ field: 'internationalCountries', operator: 'contains', value: 'usa' }],
    actions: [
      { type: 'adjustLimit', policyType: 'PROFESSIONAL_INDEMNITY', multiplier: 2.0 },
      { type: 'adjustLimit', policyType: 'PRODUCT_LIABILITY', multiplier: 2.5 },
      { type: 'addEndorsement', policyType: 'GENERAL_LIABILITY', endorsement: 'כיסוי ארה"ב' },
    ],
  },

  // Claims History Rules (Priority 60)
  {
    name: 'Clean claims history',
    nameHe: 'היסטוריית תביעות נקייה',
    description: 'Discount for no claims history',
    descriptionHe: 'הנחה להיסטוריית תביעות נקייה',
    priority: 60,
    conditions: [{ field: 'previousClaims', operator: 'equals', value: false }],
    actions: [
      { type: 'adjustLimit', policyType: 'GENERAL_LIABILITY', multiplier: 0.9 },
      { type: 'adjustLimit', policyType: 'PROPERTY', multiplier: 0.9 },
    ],
  },
  {
    name: 'Claims history loading',
    nameHe: 'תוספת היסטוריית תביעות',
    description: 'Increased limits for claims history',
    descriptionHe: 'הגדלת סכומים בשל היסטוריית תביעות',
    priority: 60,
    conditions: [{ field: 'previousClaims', operator: 'equals', value: true }],
    actions: [{ type: 'adjustLimit', policyType: 'GENERAL_LIABILITY', multiplier: 1.2 }],
  },
  {
    name: 'Multiple claims loading',
    nameHe: 'תוספת תביעות מרובות',
    description: 'Further loading for multiple claims',
    descriptionHe: 'תוספת נוספת לתביעות מרובות',
    priority: 60,
    conditions: [{ field: 'claimCount', operator: 'greaterThan', value: 2 }],
    actions: [{ type: 'adjustLimit', policyType: 'GENERAL_LIABILITY', multiplier: 1.5 }],
  },
  {
    name: 'Insurance cancellation flag',
    nameHe: 'דגל ביטול ביטוח',
    description: 'Risk flag for previous cancellation',
    descriptionHe: 'דגל סיכון לביטול ביטוח קודם',
    priority: 60,
    conditions: [{ field: 'insuranceCancelled', operator: 'equals', value: true }],
    actions: [
      { type: 'adjustLimit', policyType: 'GENERAL_LIABILITY', multiplier: 1.3 },
      { type: 'addEndorsement', policyType: 'GENERAL_LIABILITY', endorsement: 'דגל סיכון - ביטול קודם' },
    ],
  },

  // ============================================================
  // PRODUCT-SPECIFIC RULES (Priority 70-90)
  // ============================================================

  // Fire & Property Rules (Priority 70)
  {
    name: 'Fire: Long reinstatement period',
    nameHe: 'אש: תקופת השבה ארוכה',
    description: 'Higher limits for reinstatement >12 months',
    descriptionHe: 'הגדלת סכומים לתקופת השבה מעל 12 חודשים',
    priority: 70,
    conditions: [{ field: 'fire_maxReinstatementPeriod', operator: 'in', value: ['18', '24'] }],
    actions: [{ type: 'adjustLimit', policyType: 'FIRE_CONSEQUENTIAL_LOSS', multiplier: 1.5 }],
  },
  {
    name: 'Fire: Earthquake extension',
    nameHe: 'אש: הרחבת רעידת אדמה',
    description: 'Add earthquake extension when requested',
    descriptionHe: 'הוספת הרחבת רעידת אדמה',
    priority: 70,
    conditions: [{ field: 'fire_needsEarthquake', operator: 'equals', value: true }],
    actions: [
      { type: 'addExtension', policyType: 'FIRE_CONSEQUENTIAL_LOSS', extensionCode: 'EARTHQUAKE', extensionName: 'כיסוי רעידת אדמה' },
      { type: 'adjustLimit', policyType: 'FIRE_CONSEQUENTIAL_LOSS', multiplier: 1.2 },
    ],
  },
  {
    name: 'Fire: Theft coverage extension',
    nameHe: 'אש: הרחבת גניבה',
    description: 'Add theft/burglary extension',
    descriptionHe: 'הוספת הרחבת גניבה/פריצה',
    priority: 70,
    conditions: [{ field: 'fire_needsTheftCoverage', operator: 'equals', value: true }],
    actions: [
      { type: 'addExtension', policyType: 'FIRE_CONSEQUENTIAL_LOSS', extensionCode: 'THEFT', extensionName: 'כיסוי גניבה/פריצה' },
    ],
  },

  // Terrorism Rules (Priority 70)
  {
    name: 'Terrorism: Complementary with fire',
    nameHe: 'טרור: משלים לאש',
    description: 'Set complementary when fire policy exists',
    descriptionHe: 'ביטוח טרור משלים כשיש פוליסת אש',
    priority: 70,
    conditions: [{ field: 'terror_hasFirePolicy', operator: 'equals', value: true }],
    actions: [
      { type: 'addEndorsement', policyType: 'TERRORISM', endorsement: 'כיסוי משלים לפוליסת אש' },
    ],
  },
  {
    name: 'Terrorism: High location risk',
    nameHe: 'טרור: סיכון מיקום גבוה',
    description: 'Increased limits for high-risk location',
    descriptionHe: 'הגדלת סכומים למיקום בסיכון גבוה',
    priority: 70,
    conditions: [{ field: 'terror_locationRisk', operator: 'in', value: ['high', 'critical'] }],
    actions: [{ type: 'adjustLimit', policyType: 'TERRORISM', multiplier: 1.3 }],
  },

  // Mechanical/Equipment Rules (Priority 75)
  {
    name: 'Mech: Old equipment loading',
    nameHe: 'שבר מכונות: תוספת ציוד ישן',
    description: 'Higher premiums for equipment over 10 years',
    descriptionHe: 'תוספת לציוד מעל 10 שנים',
    priority: 75,
    conditions: [{ field: 'mech_equipmentAge', operator: 'equals', value: '10_plus' }],
    actions: [{ type: 'adjustLimit', policyType: 'EQUIPMENT_BREAKDOWN', multiplier: 1.3 }],
  },
  {
    name: 'Mech: No maintenance schedule',
    nameHe: 'שבר מכונות: ללא תחזוקה',
    description: 'Risk loading for no maintenance',
    descriptionHe: 'תוספת סיכון בהעדר לוח תחזוקה',
    priority: 75,
    conditions: [{ field: 'mech_maintenanceSchedule', operator: 'equals', value: 'none' }],
    actions: [{ type: 'adjustLimit', policyType: 'EQUIPMENT_BREAKDOWN', multiplier: 1.4 }],
  },
  {
    name: 'Mech: Specialized imported parts',
    nameHe: 'שבר מכונות: חלקים מיובאים',
    description: 'Add endorsement for specialized imported equipment',
    descriptionHe: 'הרחבה לציוד מיוחד עם חלקים מיובאים',
    priority: 75,
    conditions: [{ field: 'mech_specializedImportedEquipment', operator: 'equals', value: true }],
    actions: [
      { type: 'addEndorsement', policyType: 'EQUIPMENT_BREAKDOWN', endorsement: 'הרחבת חלקי חילוף מיובאים' },
    ],
  },

  // Electronic Equipment Rules (Priority 75)
  {
    name: 'ElecEquip: No backup regime',
    nameHe: 'ציוד אלקטרוני: ללא גיבוי',
    description: 'Risk flag and loading for no backup',
    descriptionHe: 'דגל סיכון ותוספת בהעדר גיבוי',
    priority: 75,
    conditions: [{ field: 'elecEquip_backupRegime', operator: 'equals', value: 'none' }],
    actions: [
      { type: 'adjustLimit', policyType: 'ELECTRONIC_EQUIPMENT', multiplier: 1.3 },
      { type: 'flagCoverageGap', gapType: 'NO_BACKUP', gapDescription: 'אין משטר גיבוי - סיכון גבוה לאובדן נתונים' },
    ],
  },
  {
    name: 'ElecEquip: Critical downtime tolerance',
    nameHe: 'ציוד אלקטרוני: סבילות השבתה קריטית',
    description: 'Higher limits for hours-only downtime tolerance',
    descriptionHe: 'הגדלת סכומים לסבילות השבתה של שעות בלבד',
    priority: 75,
    conditions: [{ field: 'elecEquip_downtimeTolerance', operator: 'equals', value: 'hours' }],
    actions: [{ type: 'adjustLimit', policyType: 'ELECTRONIC_EQUIPMENT', multiplier: 1.5 }],
  },
  {
    name: 'ElecEquip: Missing UPS',
    nameHe: 'ציוד אלקטרוני: ללא UPS',
    description: 'Add endorsement recommendation for missing UPS',
    descriptionHe: 'המלצה להתקנת UPS',
    priority: 75,
    conditions: [{ field: 'elecEquip_upsInstalled', operator: 'equals', value: false }],
    actions: [
      { type: 'addEndorsement', policyType: 'ELECTRONIC_EQUIPMENT', endorsement: 'המלצה: התקנת מערכות UPS' },
    ],
  },

  // Heavy Equipment Rules (Priority 75)
  {
    name: 'HeavyEquip: Near water operations',
    nameHe: 'ציוד כבד: פעילות ליד מים',
    description: 'Add exclusion note for near-water operations',
    descriptionHe: 'הערת אי-כיסוי לפעילות ליד מים',
    priority: 75,
    conditions: [{ field: 'heavyEquip_operatesNearWater', operator: 'equals', value: true }],
    actions: [
      { type: 'addEndorsement', policyType: 'HEAVY_EQUIPMENT', endorsement: 'הערה: פעילות ליד מים - בדיקת חריגים' },
    ],
  },
  {
    name: 'HeavyEquip: Unlicensed operators',
    nameHe: 'ציוד כבד: מפעילים ללא רישיון',
    description: 'Risk flag for unlicensed operators',
    descriptionHe: 'דגל סיכון למפעילים ללא רישיון',
    priority: 75,
    conditions: [{ field: 'heavyEquip_allOperatorsLicensed', operator: 'equals', value: false }],
    actions: [
      { type: 'flagCoverageGap', gapType: 'UNLICENSED_OPERATORS', gapDescription: 'מפעילים ללא רישיון - סיכון גבוה לדחיית תביעה' },
    ],
  },
  {
    name: 'HeavyEquip: Theft extension',
    nameHe: 'ציוד כבד: הרחבת גניבה',
    description: 'Add theft extension when requested',
    descriptionHe: 'הוספת הרחבת גניבה/שוד',
    priority: 75,
    conditions: [{ field: 'heavyEquip_needsTheftCoverage', operator: 'equals', value: true }],
    actions: [
      { type: 'addExtension', policyType: 'HEAVY_EQUIPMENT', extensionCode: 'THEFT', extensionName: 'כיסוי גניבה/שוד' },
    ],
  },

  // TPL Rules (Priority 80)
  {
    name: 'TPL: Weapons extension',
    nameHe: 'צד ג\': הרחבת נשק',
    description: 'Add weapons extension when employees carry weapons',
    descriptionHe: 'הרחבת כיסוי נשק לעובדים נושאי נשק',
    priority: 80,
    conditions: [{ field: 'tpl_employeesCarryWeapons', operator: 'equals', value: true }],
    actions: [
      { type: 'addExtension', policyType: 'GENERAL_LIABILITY', extensionCode: 'WEAPONS', extensionName: 'כיסוי נשק' },
    ],
  },
  {
    name: 'TPL: Events endorsement',
    nameHe: 'צד ג\': הרחבת אירועים',
    description: 'Add events endorsement when organizing events/serving food',
    descriptionHe: 'הרחבת כיסוי לארגון אירועים/הגשת מזון',
    priority: 80,
    conditions: [{ field: 'tpl_organizesEvents', operator: 'equals', value: true }],
    actions: [
      { type: 'addEndorsement', policyType: 'GENERAL_LIABILITY', endorsement: 'כיסוי ארגון אירועים / הגשת מזון' },
    ],
  },
  {
    name: 'TPL: High visitor count',
    nameHe: 'צד ג\': מבקרים רבים',
    description: 'Higher limits for high visitor count',
    descriptionHe: 'הגדלת סכומים למספר מבקרים גבוה',
    priority: 80,
    conditions: [{ field: 'tpl_visitorsCustomers', operator: 'greaterThan', value: 100 }],
    actions: [{ type: 'adjustLimit', policyType: 'GENERAL_LIABILITY', multiplier: 1.3 }],
  },

  // Employers Liability Rules (Priority 80)
  {
    name: 'EL: Workers abroad extension',
    nameHe: 'חבות מעבידים: הרחבת חו"ל',
    description: 'Add abroad extension for workers sent overseas',
    descriptionHe: 'הרחבת כיסוי לעובדים בחו"ל',
    priority: 80,
    conditions: [{ field: 'el_employeesAbroad', operator: 'equals', value: true }],
    actions: [
      { type: 'addExtension', policyType: 'EMPLOYER_LIABILITY', extensionCode: 'ABROAD', extensionName: 'כיסוי עובדים בחו"ל' },
    ],
  },
  {
    name: 'EL: Held territories extension',
    nameHe: 'חבות מעבידים: הרחבת שטחים',
    description: 'Add extension for workers from held territories',
    descriptionHe: 'הרחבת כיסוי לעובדים מהשטחים',
    priority: 80,
    conditions: [{ field: 'el_heldTerritoriesWorkers', operator: 'equals', value: true }],
    actions: [
      { type: 'addExtension', policyType: 'EMPLOYER_LIABILITY', extensionCode: 'TERRITORIES', extensionName: 'כיסוי עובדים מהשטחים' },
    ],
  },
  {
    name: 'EL: Night shift loading',
    nameHe: 'חבות מעבידים: תוספת משמרת לילה',
    description: 'Risk loading for night shift work',
    descriptionHe: 'תוספת סיכון לעבודה במשמרות לילה',
    priority: 80,
    conditions: [{ field: 'el_nightShiftWork', operator: 'equals', value: true }],
    actions: [{ type: 'adjustLimit', policyType: 'EMPLOYER_LIABILITY', multiplier: 1.2 }],
  },

  // Product Liability Rules (Priority 80)
  {
    name: 'ProdLiab: Export to US loading',
    nameHe: 'אחריות מוצר: תוספת יצוא לארה"ב',
    description: 'Significant loading for US exports',
    descriptionHe: 'תוספת משמעותית ליצוא מוצרים לארה"ב',
    priority: 80,
    conditions: [{ field: 'prodLiab_exportActivity', operator: 'equals', value: true }],
    actions: [{ type: 'adjustLimit', policyType: 'PRODUCT_LIABILITY', multiplier: 2.0 }],
  },
  {
    name: 'ProdLiab: Installation services endorsement',
    nameHe: 'אחריות מוצר: הרחבת התקנה',
    description: 'Add installation/repair endorsement',
    descriptionHe: 'הרחבה לשירותי התקנה ותיקון',
    priority: 80,
    conditions: [{ field: 'prodLiab_installsOrRepairs', operator: 'equals', value: true }],
    actions: [
      { type: 'addEndorsement', policyType: 'PRODUCT_LIABILITY', endorsement: 'כיסוי שירותי התקנה/תיקון' },
    ],
  },
  {
    name: 'ProdLiab: Prior claims loading',
    nameHe: 'אחריות מוצר: תוספת תביעות קודמות',
    description: 'Loading for prior product claims',
    descriptionHe: 'תוספת בגין תביעות קודמות על מוצרים',
    priority: 80,
    conditions: [{ field: 'prodLiab_priorClaims', operator: 'equals', value: true }],
    actions: [{ type: 'adjustLimit', policyType: 'PRODUCT_LIABILITY', multiplier: 1.5 }],
  },

  // Cash/Money Rules (Priority 85)
  {
    name: 'Cash: High on-premises loading',
    nameHe: 'כספים: תוספת מזומן גבוה בחצרים',
    description: 'Higher limits for high cash on premises',
    descriptionHe: 'הגדלת סכומים למזומן גבוה בחצרים',
    priority: 85,
    conditions: [{ field: 'cash_maxOnPremises', operator: 'greaterThan', value: 100000 }],
    actions: [{ type: 'adjustLimit', policyType: 'CASH_MONEY', multiplier: 1.5 }],
  },
  {
    name: 'Cash: Manager homes endorsement',
    nameHe: 'כספים: הרחבת בתי מנהלים',
    description: 'Add endorsement for cash at manager homes',
    descriptionHe: 'הרחבת כיסוי למזומן בבתי מנהלים',
    priority: 85,
    conditions: [{ field: 'cash_keptAtManagerHomes', operator: 'equals', value: true }],
    actions: [
      { type: 'addEndorsement', policyType: 'CASH_MONEY', endorsement: 'כיסוי מזומן בבתי מנהלים' },
    ],
  },
  {
    name: 'Cash: No safe risk flag',
    nameHe: 'כספים: דגל סיכון ללא כספת',
    description: 'Risk flag when no safe security measures',
    descriptionHe: 'דגל סיכון בהעדר אמצעי אבטחת כספות',
    priority: 85,
    conditions: [{ field: 'cash_safeSecurityMeasures', operator: 'equals', value: [] }],
    actions: [
      { type: 'flagCoverageGap', gapType: 'NO_SAFE', gapDescription: 'אין אמצעי אבטחת כספות - סיכון גבוה' },
    ],
  },

  // Fidelity/Crime Rules (Priority 85)
  {
    name: 'Fidelity: Weak internal controls',
    nameHe: 'נאמנות: בקרות פנימיות חלשות',
    description: 'Higher limits for weak internal controls',
    descriptionHe: 'הגדלת סכומים לבקרות פנימיות חלשות',
    priority: 85,
    conditions: [{ field: 'fidelity_internalControls', operator: 'equals', value: [] }],
    actions: [{ type: 'adjustLimit', policyType: 'FIDELITY_CRIME', multiplier: 1.5 }],
  },
  {
    name: 'Fidelity: Prior dishonesty loading',
    nameHe: 'נאמנות: תוספת מעילה קודמת',
    description: 'Significant loading for prior dishonesty',
    descriptionHe: 'תוספת משמעותית למקרי מעילה קודמים',
    priority: 85,
    conditions: [{ field: 'fidelity_priorDishonesty', operator: 'equals', value: true }],
    actions: [{ type: 'adjustLimit', policyType: 'FIDELITY_CRIME', multiplier: 2.0 }],
  },
  {
    name: 'Fidelity: High access count loading',
    nameHe: 'נאמנות: תוספת גישה רחבה',
    description: 'Loading for many employees with financial access',
    descriptionHe: 'תוספת למספר עובדים רב עם גישה לכספים',
    priority: 85,
    conditions: [{ field: 'fidelity_employeesWithAccess', operator: 'greaterThan', value: 20 }],
    actions: [{ type: 'adjustLimit', policyType: 'FIDELITY_CRIME', multiplier: 1.3 }],
  },

  // Cargo Rules (Priority 85)
  {
    name: 'Cargo: Hazardous goods loading',
    nameHe: 'מטען: תוספת חומרים מסוכנים',
    description: 'Loading for hazardous goods transport',
    descriptionHe: 'תוספת להובלת חומרים מסוכנים',
    priority: 85,
    conditions: [{ field: 'cargo_goodsTypes', operator: 'contains', value: 'hazardous' }],
    actions: [{ type: 'adjustLimit', policyType: 'CARGO_TRANSIT', multiplier: 1.5 }],
  },
  {
    name: 'Cargo: No GPS risk flag',
    nameHe: 'מטען: דגל סיכון ללא GPS',
    description: 'Risk flag when no GPS tracking',
    descriptionHe: 'דגל סיכון בהעדר מעקב GPS',
    priority: 85,
    conditions: [{ field: 'cargo_vehicleSecurityMeasures', operator: 'equals', value: [] }],
    actions: [
      { type: 'flagCoverageGap', gapType: 'NO_GPS', gapDescription: 'אין אמצעי אבטחת רכב - סיכון גבוה לגניבת מטען' },
    ],
  },
  {
    name: 'Cargo: Import/export extension',
    nameHe: 'מטען: הרחבת יבוא/יצוא',
    description: 'Add import/export extension',
    descriptionHe: 'הרחבת כיסוי ליבוא/יצוא',
    priority: 85,
    conditions: [{ field: 'cargo_importExportActivity', operator: 'equals', value: true }],
    actions: [
      { type: 'addExtension', policyType: 'CARGO_TRANSIT', extensionCode: 'IMPORT_EXPORT', extensionName: 'כיסוי יבוא/יצוא' },
    ],
  },

  // CAR Rules (Priority 90)
  {
    name: 'CAR: Palestinian workers extension',
    nameHe: 'עבודות קבלניות: הרחבת עובדים מהשטחים',
    description: 'Add extension for Palestinian workers',
    descriptionHe: 'הרחבת כיסוי לעובדים מהשטחים',
    priority: 90,
    conditions: [{ field: 'car_palestinianWorkers', operator: 'equals', value: true }],
    actions: [
      { type: 'addExtension', policyType: 'CAR_INSURANCE', extensionCode: 'TERRITORIES_WORKERS', extensionName: 'כיסוי עובדים מהשטחים' },
    ],
  },
  {
    name: 'CAR: Underground utilities endorsement',
    nameHe: 'עבודות קבלניות: הרחבת תשתיות תת-קרקעיות',
    description: 'Add endorsement for underground utilities',
    descriptionHe: 'הרחבה לתשתיות תת-קרקעיות',
    priority: 90,
    conditions: [{ field: 'car_undergroundUtilities', operator: 'equals', value: true }],
    actions: [
      { type: 'addEndorsement', policyType: 'CAR_INSURANCE', endorsement: 'כיסוי נזקים לתשתיות תת-קרקעיות' },
    ],
  },
  {
    name: 'CAR: Turnkey exclusion flag',
    nameHe: 'עבודות קבלניות: דגל טורנקי',
    description: 'Flag exclusion for turnkey/BOT projects',
    descriptionHe: 'דגל לפרויקטים מסוג טורנקי/BOT',
    priority: 90,
    conditions: [{ field: 'car_turnkeyProject', operator: 'equals', value: true }],
    actions: [
      { type: 'flagCoverageGap', gapType: 'TURNKEY_PROJECT', gapDescription: 'פרויקט טורנקי/BOT - בדיקת חריגים וסעיפים מיוחדים נדרשת' },
    ],
  },
];

// ============================================================
// SEED FUNCTION
// ============================================================

interface SectionData {
  title: string;
  titleHe: string;
  descriptionHe?: string;
  order: number;
  showIf?: { questionId: string; operator: string; value: unknown }[];
  questions: QuestionData[];
}

interface QuestionData {
  questionId: string;
  type: string;
  label: string;
  labelHe: string;
  descriptionHe?: string;
  required: boolean;
  order: number;
  min?: number;
  max?: number;
  riskWeight?: number;
  policyAffinity?: string[];
  options?: { value: string; label: string; labelHe: string }[];
  showIf?: { questionId: string; operator: string; value: unknown }[];
}

async function clearExistingTemplates() {
  console.log('Clearing existing templates...');

  // Delete in correct order due to foreign keys
  await prisma.coverageRule.deleteMany({});
  await prisma.question.deleteMany({});
  await prisma.questionnaireSection.deleteMany({});
  await prisma.questionnaireTemplate.deleteMany({});

  console.log('Cleared all existing templates.');
}

async function seedTemplate(
  sector: string,
  sections: SectionData[],
  includeRules: boolean = false
) {
  console.log(`\nSeeding template for sector: ${sector}`);

  const template = await prisma.questionnaireTemplate.create({
    data: {
      sector,
      sectorHe: sectorTranslations[sector] || sector,
      version: '3.0',
      isActive: true,
      sections: {
        create: sections.map((section) => ({
          title: section.title,
          titleHe: section.titleHe,
          descriptionHe: section.descriptionHe,
          order: section.order,
          showIf: section.showIf as Prisma.InputJsonValue | undefined,
          questions: {
            create: section.questions.map((q) => ({
              questionId: q.questionId,
              label: q.label,
              labelHe: q.labelHe,
              descriptionHe: q.descriptionHe,
              type: q.type,
              required: q.required,
              order: q.order,
              min: q.min,
              max: q.max,
              riskWeight: q.riskWeight ?? 0,
              policyAffinity: q.policyAffinity ?? [],
              options: q.options as Prisma.InputJsonValue | undefined,
              showIf: q.showIf as Prisma.InputJsonValue | undefined,
            })),
          },
        })),
      },
      ...(includeRules && {
        rules: {
          create: comprehensiveRules.map((rule) => ({
            name: rule.name,
            nameHe: rule.nameHe,
            description: rule.description,
            descriptionHe: rule.descriptionHe,
            priority: rule.priority,
            isActive: true,
            conditions: rule.conditions as unknown as Prisma.InputJsonValue,
            actions: rule.actions as unknown as Prisma.InputJsonValue,
          })),
        },
      }),
    },
  });

  const questionCount = sections.reduce((sum, s) => sum + s.questions.length, 0);
  console.log(`  Created template: ${template.id}`);
  console.log(`  Sections: ${sections.length}, Questions: ${questionCount}`);
}

async function main() {
  console.log('='.repeat(60));
  console.log('COMPREHENSIVE QUESTIONNAIRE TEMPLATES SEED');
  console.log('='.repeat(60));

  try {
    await clearExistingTemplates();

    // Seed all sector-specific templates
    await seedTemplate('CONSTRUCTION', buildConstructionTemplate(), true);
    await seedTemplate('TECHNOLOGY', buildTechnologyTemplate(), true);
    await seedTemplate('MANUFACTURING', buildManufacturingTemplate(), true);
    await seedTemplate('RETAIL', buildRetailTemplate(), true);
    await seedTemplate('HEALTHCARE', buildHealthcareTemplate(), true);
    await seedTemplate('LOGISTICS', buildLogisticsTemplate(), true);
    await seedTemplate('CONSULTING', buildConsultingTemplate(), true);
    await seedTemplate('GENERIC', buildGenericTemplate(), true);

    console.log('\n' + '='.repeat(60));
    console.log('SEED COMPLETED SUCCESSFULLY!');
    console.log('='.repeat(60));
  } catch (error) {
    console.error('Seed failed:', error);
    throw error;
  } finally {
    await prisma.$disconnect();
  }
}

main().catch((e) => {
  console.error(e);
  process.exit(1);
});
